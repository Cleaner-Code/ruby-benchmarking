# Ruby Benchmark Comparison

_Generated: 2025-12-17 17:34:55_

## Versions Compared

- **MRI**: `ruby 3.4.7p58`
- **JRuby 10**: `JRuby 10.0.2.0 (3.4.2) [21.0.9]`
- **JRuby 1.7**: `JRuby 1.7.27 (1.9.3) [1.8.0_472]`
- **TruffleRuby**: `truffleruby 3.3.7p0`

## Technique Comparisons

Format: **time** (gc, heap MB) | \* = best for that Ruby

### String Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| + operator | 0.0013 (2, 51.6MB) | 0.0021 (1, 59.4MB) | 0.0020 (128.1MB) | **0.0002 (604.7MB)** | TruffleRuby |
| << shovel | **0.0001 (51.6MB)** | 0.0004 (63.4MB) | 0.0003 (128.1MB) | 0.0002 (609.8MB) | MRI |
| Array#join | **0.0000\* (51.7MB)** | 0.0003\* (63.4MB) | 0.0003\* (130.6MB) | 0.0001 (611.2MB) | MRI |
| StringIO | **0.0001 (51.7MB)** | 0.0006 (63.4MB) | 0.0006 (130.6MB) | 0.0004 (622.3MB) | MRI |
| concat | **0.0001 (51.7MB)** | 0.0004 (63.4MB) | 0.0003 (130.6MB) | 0.0001 (611.0MB) | MRI |
| each_with_object | **0.0001 (51.7MB)** | 0.0004 (63.4MB) | 0.0003 (133.0MB) | 0.0001 (628.1MB) | MRI |
| inject << | 0.0001 (51.7MB) | 0.0005 (67.4MB) | 0.0003 (16.1MB) | **0.0001 (670.5MB)** | TruffleRuby |
| interpolation | 0.0020 (1, 52.1MB) | 0.0023 (1, 75.6MB) | 0.0020 (1, 17.2MB) | **0.0001\* (676.8MB)** | TruffleRuby |

> **MRI**: Array#join | **JRuby 10**: Array#join | **JRuby 1.7**: Array#join | **TruffleRuby**: interpolation

### Array Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each + var | 0.0259 (61.2MB) | 0.0171 (277.6MB) | 0.0445 (2, 172.2MB) | **0.0004\* (734.2MB)** | TruffleRuby |
| for in | 0.0295 (61.2MB) | 0.0143 (364.2MB) | 0.0287 (1, 126.7MB) | **0.0004 (668.0MB)** | TruffleRuby |
| reduce block | 0.0313 (61.2MB) | 0.0232 (277.3MB) | 0.0675 (5, 153.6MB) | **0.0004 (749.2MB)** | TruffleRuby |
| reduce(:+) | 0.0009\* (61.2MB) | 0.0197 (1, 113.1MB) | 0.0212\* (2, 90.4MB) | **0.0004 (742.0MB)** | TruffleRuby |
| sum | 0.0012 (61.2MB) | 0.0013\* (139.6MB) | - | **0.0004 (720.5MB)** | TruffleRuby |
| while index | 0.0273 (61.2MB) | 0.1242 (364.4MB) | 0.0731 (2, 152.2MB) | **0.0030 (740.7MB)** | TruffleRuby |

> **MRI**: reduce(:+) | **JRuby 10**: sum | **JRuby 1.7**: reduce(:+) | **TruffleRuby**: each + var

### Array Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| << in times | 0.0029 (68.1MB) | 0.0020 (161.7MB) | 0.0043 (1, 75.6MB) | **0.0001 (766.2MB)** | TruffleRuby |
| Array.new block | 0.0024 (66.6MB) | 0.0037 (436.2MB) | 0.0036 (1, 81.8MB) | **0.0009 (704.7MB)** | TruffleRuby |
| Range#map | 0.0031 (68.1MB) | 0.0022 (113.7MB) | 0.0032 (147.3MB) | **0.0009 (741.9MB)** | TruffleRuby |
| Range#to_a | 0.0012\* (63.6MB) | 0.0014\* (396.2MB) | 0.0004\* (150.8MB) | **0.0000\* (679.3MB)** | TruffleRuby |
| each_with_object | 0.0036 (68.4MB) | 0.0027 (249.7MB) | 0.0051 (135.5MB) | **0.0023 (770.3MB)** | TruffleRuby |
| push in times | 0.0032 (68.1MB) | 0.0016 (205.7MB) | 0.0071 (154.7MB) | **0.0016 (810.1MB)** | TruffleRuby |

> **All agree**: Range#to_a

### Array Sorting

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| sort | 0.0077 (68.4MB) | 0.0320 (273.7MB) | 0.0109 (173.6MB) | **0.0044 (774.0MB)** | TruffleRuby |
| sort block | 0.0308 (68.5MB) | 0.0974 (1, 111.1MB) | 0.0562 (2, 165.5MB) | **0.0086 (791.8MB)** | TruffleRuby |
| sort! | 0.0076 (68.5MB) | 0.0262 (293.7MB) | 0.0086\* (80.1MB) | **0.0029\* (781.9MB)** | TruffleRuby |
| sort_by | 0.0076\* (68.5MB) | 0.0210\* (151.1MB) | 0.0257 (1, 85.5MB) | **0.0075 (753.6MB)** | TruffleRuby |
| sort_by(&:itself) | **0.0076 (68.7MB)** | 0.0243 (211.1MB) | - | 0.0154 (818.1MB) | MRI |

> **MRI**: sort_by | **JRuby 10**: sort_by | **JRuby 1.7**: sort! | **TruffleRuby**: sort!

### Hash Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Hash[] | 0.0067 (1, 93.9MB) | 0.0151 (129.3MB) | **0.0059\* (202.7MB)** | 0.0066 (785.2MB) | JRuby 1.7 |
| []= loop | 0.0062 (75.8MB) | 0.0131 (267.1MB) | 0.0117 (185.3MB) | **0.0016\* (781.4MB)** | TruffleRuby |
| each_with_object | 0.0078 (90.0MB) | 0.0190 (359.1MB) | 0.0149 (166.5MB) | **0.0025 (763.4MB)** | TruffleRuby |
| map.to_h | 0.0089 (1, 94.5MB) | 0.0132 (431.1MB) | - | **0.0035 (773.8MB)** | TruffleRuby |
| zip.to_h | 0.0047\* (1, 83.4MB) | 0.0115\* (303.1MB) | - | **0.0022 (765.0MB)** | TruffleRuby |

> **MRI**: zip.to_h | **JRuby 10**: zip.to_h | **JRuby 1.7**: Hash[] | **TruffleRuby**: []= loop

### Hash Access

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| [] existing | 0.0292\* (154.0MB) | 0.0369 (377.3MB) | 0.0526 (2, 188.7MB) | **0.0140 (827.6MB)** | TruffleRuby |
| [] missing | 0.0342 (165.5MB) | 0.0419 (296.6MB) | 0.0503 (2, 199.8MB) | **0.0091\* (1015.7MB)** | TruffleRuby |
| dig | 0.0311 (165.5MB) | 0.0345\* (272.4MB) | - | **0.0129 (1046.3MB)** | TruffleRuby |
| fetch default | 0.0375 (165.5MB) | 0.0345 (380.6MB) | 0.0501\* (1, 203.3MB) | **0.0096 (1017.2MB)** | TruffleRuby |
| fetch existing | 0.0337 (165.5MB) | 0.0424 (1, 216.6MB) | 0.0549 (2, 193.4MB) | **0.0129 (1009.6MB)** | TruffleRuby |
| \|\| default | 0.0403 (165.5MB) | 0.0402 (460.6MB) | 0.0503 (1, 195.9MB) | **0.0093 (1015.2MB)** | TruffleRuby |

> **MRI**: [] existing | **JRuby 10**: dig | **JRuby 1.7**: fetch default | **TruffleRuby**: [] missing

### Hash Key Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each { \|k,_\| } | 1.2665 (157, 103.2MB) | 0.8982 (19, 389.5MB) | 2.1399 (87, 283.9MB) | **0.5104 (17, 1192.2MB)** | TruffleRuby |
| each_key.map | 1.3586 (166, 140.7MB) | 1.4878 (22, 393.7MB) | 1.4251 (69, 325.8MB) | **0.5142 (16, 1174.0MB)** | TruffleRuby |
| keys.each | 1.2387 (157, 118.5MB) | 0.9089 (19, 401.9MB) | 1.4626 (63, 298.8MB) | **0.5939 (20, 1176.3MB)** | TruffleRuby |
| keys.map | 1.1637\* (157, 149.0MB) | 0.7119\* (18, 377.2MB) | 1.3995\* (60, 224.4MB) | **0.5580 (20, 1191.6MB)** | TruffleRuby |
| map { \|k,_\| } | 1.3778 (166, 148.3MB) | 1.2325 (29, 285.8MB) | 2.0906 (96, 191.3MB) | **0.4892\* (17, 1163.1MB)** | TruffleRuby |

> **MRI**: keys.map | **JRuby 10**: keys.map | **JRuby 1.7**: keys.map | **TruffleRuby**: map { \|k,_\| }

### Conditionals

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| array lookup | 0.0250\* (143.3MB) | 0.0280 (4, 133.5MB) | 0.0359\* (1, 256.8MB) | **0.0060\* (789.8MB)** | TruffleRuby |
| case/when | 0.1038 (143.3MB) | 0.0437 (461.5MB) | 0.0964 (3, 205.5MB) | **0.0124 (785.7MB)** | TruffleRuby |
| hash lookup | 0.0376 (143.3MB) | 0.0430 (621.5MB) | 0.0464 (1, 232.9MB) | **0.0117 (789.3MB)** | TruffleRuby |
| if/elsif | 0.0369 (143.9MB) | 0.0195 (1, 297.5MB) | 0.0480 (1, 265.2MB) | **0.0068 (786.7MB)** | TruffleRuby |
| ternary | 0.0370 (1, 124.0MB) | 0.0182\* (577.5MB) | 0.0448 (1, 238.0MB) | **0.0061 (774.9MB)** | TruffleRuby |

> **MRI**: array lookup | **JRuby 10**: ternary | **JRuby 1.7**: array lookup | **TruffleRuby**: array lookup

### Loops

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| loop+break | 0.0367 (143.3MB) | 0.0460 (1, 199.2MB) | 0.0904 (2, 298.0MB) | **0.0003 (911.4MB)** | TruffleRuby |
| range.each | 0.0259 (143.3MB) | 0.0225 (1, 315.0MB) | 0.0379 (3, 254.5MB) | **0.0003\* (779.0MB)** | TruffleRuby |
| step | 0.0259 (143.3MB) | 0.0169\* (1, 99.1MB) | 0.0369 (2, 367.5MB) | **0.0103 (1, 834.9MB)** | TruffleRuby |
| times | 0.0327 (143.3MB) | 0.0187 (1, 207.0MB) | 0.0367 (2, 349.8MB) | **0.0077 (1, 777.4MB)** | TruffleRuby |
| upto | 0.0259 (143.3MB) | 0.0197 (1, 167.0MB) | 0.0370 (2, 300.4MB) | **0.0004 (778.5MB)** | TruffleRuby |
| while | 0.0233\* (143.3MB) | 0.0957 (1, 189.8MB) | 0.0359\* (2, 227.6MB) | **0.0022 (787.4MB)** | TruffleRuby |

> **MRI**: while | **JRuby 10**: step | **JRuby 1.7**: while | **TruffleRuby**: range.each

### String Search

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| =~ regex | 0.2169 (46, 151.5MB) | 0.2368 (1, 55.8MB) | 0.2491 (1, 360.1MB) | **0.0094 (838.1MB)** | TruffleRuby |
| [] | 0.1535 (3, 143.3MB) | 0.0651 (263.2MB) | 0.0616 (276.3MB) | **0.0094 (872.9MB)** | TruffleRuby |
| include? | 0.1529 (143.3MB) | 0.0612 (223.2MB) | 0.0640 (361.1MB) | **0.0081 (817.6MB)** | TruffleRuby |
| index | 0.1557 (143.3MB) | 0.0622 (235.2MB) | 0.0637 (1, 229.1MB) | **0.0092 (866.3MB)** | TruffleRuby |
| match? | 0.1982 (19, 151.2MB) | 0.2253 (239.8MB) | - | **0.0087 (885.6MB)** | TruffleRuby |
| start_with? | 0.0039\* (151.4MB) | 0.0023\* (67.8MB) | 0.0333\* (8, 362.2MB) | **0.0022\* (802.7MB)** | TruffleRuby |

> **All agree**: start_with?

### Filtering

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each + << | 0.0144 (166.8MB) | 0.0092 (1, 90.3MB) | 0.0201 (1, 47.9MB) | **0.0005 (823.6MB)** | TruffleRuby |
| filter_map | 0.0170 (172.6MB) | 0.0109 (350.3MB) | - | **0.0005 (788.1MB)** | TruffleRuby |
| partition[0] | 0.0178 (172.6MB) | 0.0219 (262.3MB) | 0.0206 (1, 160.4MB) | **0.0006 (820.6MB)** | TruffleRuby |
| reject | 0.0126\* (161.0MB) | 0.0051\* (253.5MB) | 5.8279 (171.4MB) | **0.0004 (823.1MB)** | TruffleRuby |
| select | 0.0128 (155.2MB) | 0.0060 (175.8MB) | 0.0169 (1, 53.1MB) | **0.0004 (798.1MB)** | TruffleRuby |
| select &:even? | 0.0184 (155.2MB) | 0.0175 (1, 165.5MB) | 0.0095\* (1, 147.8MB) | **0.0003\* (819.6MB)** | TruffleRuby |

> **MRI**: reject | **JRuby 10**: reject | **JRuby 1.7**: select &:even? | **TruffleRuby**: select &:even?

### Transform

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| collect | 0.0121\* (174.0MB) | 0.0071\* (379.0MB) | 0.0237 (1, 141.4MB) | **0.0004 (788.5MB)** | TruffleRuby |
| each_with_object | 0.0190 (169.6MB) | 0.0150 (310.1MB) | 0.0397 (3, 133.5MB) | **0.0008 (788.7MB)** | TruffleRuby |
| inject | 0.0201 (165.8MB) | 0.0273 (1, 460.7MB) | 0.0408 (2, 142.4MB) | **0.0008 (788.7MB)** | TruffleRuby |
| map | 0.0123 (174.0MB) | 0.0073 (278.7MB) | 0.0224\* (1, 194.0MB) | **0.0004 (788.1MB)** | TruffleRuby |
| map &proc | 0.0126 (174.0MB) | 0.0085 (1, 183.0MB) | 0.0239 (1, 99.6MB) | **0.0004\* (788.2MB)** | TruffleRuby |

> **MRI**: collect | **JRuby 10**: collect | **JRuby 1.7**: map | **TruffleRuby**: map &proc

### Number Conversion

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Integer() | 0.0050 (168.0MB) | 0.0051\* (503.0MB) | 0.0078 (1, 115.6MB) | **0.0009 (815.7MB)** | TruffleRuby |
| Integer(s,10) | 0.0071 (168.0MB) | 0.0073 (579.0MB) | 0.0074 (1, 90.0MB) | **0.0002\* (788.9MB)** | TruffleRuby |
| map { to_i } | 0.0047 (168.0MB) | 0.0088 (1, 427.0MB) | 0.0071 (134.2MB) | **0.0004 (788.7MB)** | TruffleRuby |
| map(&:to_i) | 0.0039\* (168.0MB) | 0.0052 (552.7MB) | 0.0032\* (153.4MB) | **0.0005 (820.9MB)** | TruffleRuby |

> **MRI**: map(&:to_i) | **JRuby 10**: Integer() | **JRuby 1.7**: map(&:to_i) | **TruffleRuby**: Integer(s,10)

### Nil Handling

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| compact.sum | 0.0015\* (185.5MB) | 0.0030\* (414.4MB) | - | **0.0011\* (798.4MB)** | TruffleRuby |
| nil? ? 0 : itself | 0.0173 (185.5MB) | 0.0087 (260.7MB) | - | **0.0013 (796.4MB)** | TruffleRuby |
| to_i | 0.0205 (185.5MB) | 0.0078 (394.4MB) | 0.0176 (200.5MB) | **0.0018 (823.9MB)** | TruffleRuby |
| v.nil? ternary | 0.0147 (185.5MB) | 0.0090 (314.4MB) | 0.0221 (1, 147.0MB) | **0.0015 (823.7MB)** | TruffleRuby |
| \|\| default | 0.0141 (179.6MB) | 0.0107 (1, 230.4MB) | 0.0159\* (1, 92.8MB) | **0.0013 (821.8MB)** | TruffleRuby |

> **MRI**: compact.sum | **JRuby 10**: compact.sum | **JRuby 1.7**: \|\| default | **TruffleRuby**: compact.sum

### Object Duplication

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Hash[] | 0.0079 (2, 208.5MB) | **0.0056 (1, 135.2MB)** | 0.0079 (1, 130.0MB) | 0.0074 (1, 824.5MB) | JRuby 10 |
| clone | 0.0120 (2, 202.3MB) | 0.0065 (341.6MB) | 0.0106 (201.9MB) | **0.0009 (794.2MB)** | TruffleRuby |
| dup | 0.0124 (3, 209.6MB) | 0.0056 (480.7MB) | 0.0107 (1, 140.3MB) | **0.0009 (815.5MB)** | TruffleRuby |
| merge({}) | 0.0210 (9, 218.8MB) | **0.0061 (391.2MB)** | 0.0112 (1, 122.9MB) | 0.0082 (1, 844.8MB) | JRuby 10 |
| to_h | 0.0040\* (210.9MB) | 0.0016\* (399.2MB) | 0.0041\* (145.9MB) | **0.0002\* (852.3MB)** | TruffleRuby |

> **All agree**: to_h

### Method Invocation

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| __send__ | 0.0258 (192.0MB) | 0.0215 (356.8MB) | 0.0208 (184.0MB) | **0.0063 (861.6MB)** | TruffleRuby |
| direct | 0.0167\* (204.9MB) | 0.0066\* (399.2MB) | 0.0161\* (1, 90.2MB) | **0.0054\* (848.4MB)** | TruffleRuby |
| method.call | 0.0351 (194.1MB) | 0.0089 (268.8MB) | 0.0167 (1, 115.7MB) | **0.0066 (861.3MB)** | TruffleRuby |
| public_send | 0.0383 (196.8MB) | 0.0247 (264.8MB) | 0.0218 (173.9MB) | **0.0060 (863.8MB)** | TruffleRuby |
| send | 0.0259 (200.3MB) | 0.0200 (491.2MB) | 0.0209 (158.8MB) | **0.0057 (863.2MB)** | TruffleRuby |

> **All agree**: direct

### Block/Yield

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| block.call | 0.0971 (189.3MB) | 0.0389 (666.2MB) | 0.1254 (3, 203.7MB) | **0.0000\* (838.6MB)** | TruffleRuby |
| each { } | 0.0146 (186.9MB) | 0.0116 (354.1MB) | 0.0222 (1, 180.1MB) | **0.0002 (839.2MB)** | TruffleRuby |
| lambda.call | 0.0992 (187.3MB) | 0.0587 (1, 170.1MB) | 0.1434 (3, 232.5MB) | **0.0000 (839.2MB)** | TruffleRuby |
| map { } | 0.0121\* (186.5MB) | 0.0066\* (434.1MB) | 0.0142\* (189.2MB) | **0.0003 (839.3MB)** | TruffleRuby |
| nested yield | 0.1198 (188.5MB) | 0.0446 (502.1MB) | 0.1420 (4, 119.3MB) | **0.0103 (1, 838.1MB)** | TruffleRuby |
| no block baseline | 0.0750 (186.0MB) | 0.0186 (334.2MB) | 0.0709 (2, 111.5MB) | **0.0069 (840.1MB)** | TruffleRuby |
| proc.call | 0.0982 (187.8MB) | 0.0459 (1, 334.1MB) | 0.1311 (3, 174.6MB) | **0.0011 (838.6MB)** | TruffleRuby |
| select { } | 0.0140 (186.3MB) | 0.0083 (514.1MB) | 0.0172 (200.7MB) | **0.0022 (839.3MB)** | TruffleRuby |
| unused closure (&block) | 0.1174 (186.1MB) | 0.0655 (2, 114.2MB) | 0.2426 (8, 101.3MB) | **0.0000 (839.3MB)** | TruffleRuby |
| unused closure (yield) | 0.0927 (186.0MB) | 0.0642 (1, 334.2MB) | 0.1245 (5, 245.0MB) | **0.0000 (840.0MB)** | TruffleRuby |
| yield | 0.0926 (190.5MB) | 0.0372 (1, 210.2MB) | 0.1040 (3, 191.3MB) | **0.0000 (838.5MB)** | TruffleRuby |

> **MRI**: map { } | **JRuby 10**: map { } | **JRuby 1.7**: map { } | **TruffleRuby**: block.call

### Eval

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| binding.eval | 0.1470 (18, 168.6MB) | 0.3884 (4, 594.6MB) | 0.0315 (4, 202.1MB) | **0.0009 (834.9MB)** | TruffleRuby |
| class_eval blk | 0.0044 (3, 166.1MB) | 0.0038 (690.6MB) | 0.0069 (145.3MB) | **0.0009 (834.8MB)** | TruffleRuby |
| class_eval str | 0.1729 (18, 166.5MB) | 0.2896 (4, 594.6MB) | **0.0349 (4, 218.7MB)** | 0.3329 (4, 1345.8MB) | JRuby 1.7 |
| direct (baseline) | 0.0018\* (106.5MB) | 0.0006\* (606.6MB) | 0.0019\* (218.8MB) | **0.0006\* (835.9MB)** | TruffleRuby |
| eval simple | 0.1712 (18, 190.8MB) | 0.2725 (4, 482.4MB) | 0.0325 (4, 195.0MB) | **0.0006 (840.1MB)** | TruffleRuby |
| eval vars | 0.1965 (18, 166.5MB) | 0.3238 (5, 250.4MB) | 0.0629 (4, 231.8MB) | **0.0006 (840.2MB)** | TruffleRuby |
| instance_eval blk | 0.0046 (3, 166.1MB) | 0.0039 (470.4MB) | 0.0067 (1, 105.0MB) | **0.0007 (968.0MB)** | TruffleRuby |
| instance_eval str | 0.1718 (18, 166.5MB) | 0.2811 (4, 370.4MB) | **0.0354 (4, 178.4MB)** | 0.3326 (4, 1373.7MB) | JRuby 1.7 |

> **All agree**: direct (baseline)

### Caller

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| caller() | **0.3383 (724, 106.9MB)** | 1.9130 (7, 342.7MB) | 3.7625\* (19, 255.6MB) | 3.9402 (44, 710.2MB) | MRI |
| caller(0) | **0.3883 (833, 107.0MB)** | 1.9399 (7, 434.7MB) | 3.7829 (20, 255.7MB) | 4.2255 (47, 553.4MB) | MRI |
| caller(0, 1) | **0.0608 (108, 107.2MB)** | 0.3899 (2, 378.8MB) | - | 2.1321 (19, 637.5MB) | MRI |
| caller(0, 5) | **0.2192 (470, 107.2MB)** | 2.2576 (8, 258.8MB) | - | 3.1041 (32, 554.8MB) | MRI |
| caller_locations(0, 1) | **0.0173\* (54, 107.5MB)** | 0.3747\* (2, 470.8MB) | - | 1.6697\* (16, 699.7MB) | MRI |
| caller_locations(0, 5) | **0.0390 (329, 107.5MB)** | 2.1298 (7, 186.8MB) | - | 2.4526 (19, 631.0MB) | MRI |

> **MRI**: caller_locations(0, 1) | **JRuby 10**: caller_locations(0, 1) | **JRuby 1.7**: caller() | **TruffleRuby**: caller_locations(0, 1)

### Marshal

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| dump only medium 1k | **0.0204 (164.0MB)** | 0.0305 (295.0MB) | 0.0353 (256.0MB) | 0.0920 (4, 1363.1MB) | MRI |
| dump/load medium 1k | **0.0442 (2, 148.1MB)** | 0.1001 (718.8MB) | 0.0582 (2, 172.3MB) | 0.1384 (5, 1547.5MB) | MRI |
| dump/load small 1k | **0.0017\* (1, 107.8MB)** | 0.0036\* (202.8MB) | 0.0028\* (108.9MB) | 0.0081\* (798.6MB) | MRI |
| load only medium 1k | 0.0236 (1, 166.9MB) | 0.0685 (607.0MB) | **0.0217 (1, 235.8MB)** | 0.0285 (1123.4MB) | JRuby 1.7 |

> **All agree**: dump/load small 1k

### Memoization

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| fetch block 100k | 0.0047 (166.5MB) | 0.0062 (1, 139.0MB) | 0.0104 (242.5MB) | **0.0039 (1077.7MB)** | TruffleRuby |
| ivar \|\|= 100k | 0.0043\* (166.2MB) | **0.0013\* (179.0MB)** | 0.0052\* (149.0MB) | 0.0262 (1127.5MB) | JRuby 10 |
| key? + []= 100k | 0.0054 (166.4MB) | 0.0048 (175.0MB) | 0.0109 (132.3MB) | **0.0029\* (1071.1MB)** | TruffleRuby |
| \|\|= hash key 100k | 0.0056 (166.7MB) | 0.0046 (647.0MB) | 0.0076 (125.6MB) | **0.0032 (1079.4MB)** | TruffleRuby |

> **MRI**: ivar \|\|= 100k | **JRuby 10**: ivar \|\|= 100k | **JRuby 1.7**: ivar \|\|= 100k | **TruffleRuby**: key? + []= 100k

### Set vs Array

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Array#include? 10 100k | 0.0054 (166.0MB) | 0.0026 (203.0MB) | 0.0054 (189.0MB) | **0.0014 (969.7MB)** | TruffleRuby |
| Array#include? 1k 10k | 0.0154 (168.3MB) | 0.0115 (619.0MB) | 0.0048 (188.7MB) | **0.0025 (917.6MB)** | TruffleRuby |
| Set reuse 10 100k | 0.0056 (168.3MB) | **0.0013\* (615.0MB)** | 0.0063 (185.4MB) | 0.0021 (897.0MB) | JRuby 10 |
| Set reuse 1k 10k | 0.0006\* (257.7MB) | 0.0017 (563.4MB) | 0.0007\* (246.3MB) | **0.0002\* (935.5MB)** | TruffleRuby |
| Set.new+incl 10 100k | 0.1414 (36, 168.4MB) | **0.0137 (595.0MB)** | 0.1055 (3, 148.9MB) | 0.0139 (1, 891.0MB) | JRuby 10 |
| Set.new+incl 1k 10k | 0.7216 (17, 257.7MB) | 0.2129 (2, 559.4MB) | 0.4926 (15, 242.9MB) | **0.1736 (7, 1312.0MB)** | TruffleRuby |

> **MRI**: Set reuse 1k 10k | **JRuby 10**: Set reuse 10 100k | **JRuby 1.7**: Set reuse 1k 10k | **TruffleRuby**: Set reuse 1k 10k

### Mutex

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| lock/unlock 100k | 0.0069 (257.7MB) | 0.0032 (707.4MB) | 0.0076 (1, 102.8MB) | **0.0013 (816.0MB)** | TruffleRuby |
| no sync 100k | 0.0032\* (257.7MB) | 0.0013\* (587.4MB) | 0.0028\* (116.1MB) | **0.0000\* (858.6MB)** | TruffleRuby |
| synchronize 100k | 0.0091 (257.7MB) | 0.0056 (683.4MB) | 0.0083 (233.0MB) | **0.0013 (842.3MB)** | TruffleRuby |
| try_lock 100k | 0.0058 (257.7MB) | 0.0032 (727.4MB) | 0.0075 (139.5MB) | **0.0013 (816.5MB)** | TruffleRuby |

> **All agree**: no sync 100k

### Thread-local

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| current[] read 100k | 0.0055 (257.7MB) | 0.0022 (127.5MB) | 0.0078 (176.3MB) | **0.0000 (821.9MB)** | TruffleRuby |
| current[] write 100k | 0.0047 (257.7MB) | 0.0027 (167.5MB) | 0.0047 (229.7MB) | **0.0000 (856.9MB)** | TruffleRuby |
| ivar read 100k | 0.0046 (257.7MB) | 0.0016 (191.5MB) | 0.0052 (1, 99.5MB) | **0.0001 (845.0MB)** | TruffleRuby |
| local var 100k | 0.0033\* (257.7MB) | 0.0013\* (211.5MB) | 0.0035\* (136.2MB) | **0.0000\* (845.7MB)** | TruffleRuby |

> **All agree**: local var 100k

### Data Structures

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Class create 10k | 0.0021 (5, 257.9MB) | 0.0043 (275.5MB) | 0.0019 (236.5MB) | **0.0006 (836.6MB)** | TruffleRuby |
| Class read 100k | 0.0040 (257.8MB) | 0.0015 (343.5MB) | 0.0046 (179.7MB) | **0.0003 (795.3MB)** | TruffleRuby |
| Class write 100k | 0.0097 (14, 257.8MB) | 0.0039 (663.5MB) | 0.0076 (239.9MB) | **0.0024 (803.7MB)** | TruffleRuby |
| Hash create 10k | 0.0015\* (3, 257.8MB) | 0.0022 (239.5MB) | 0.0013\* (176.3MB) | **0.0004 (830.3MB)** | TruffleRuby |
| Hash read 100k | 0.0040 (257.8MB) | 0.0021 (299.5MB) | 0.0061 (1, 106.2MB) | **0.0000\* (802.4MB)** | TruffleRuby |
| Hash write 100k | 0.0110 (14, 257.8MB) | 0.0067 (451.5MB) | 0.0164 (256.5MB) | **0.0020 (795.9MB)** | TruffleRuby |
| Struct create 10k | 0.0018 (2, 257.8MB) | 0.0031 (259.5MB) | 0.0021 (206.4MB) | **0.0004 (836.0MB)** | TruffleRuby |
| Struct read 100k | 0.0038 (257.8MB) | 0.0014\* (323.5MB) | 0.0046 (142.9MB) | **0.0000 (821.5MB)** | TruffleRuby |
| Struct write 100k | 0.0098 (14, 257.8MB) | 0.0045 (555.5MB) | 0.0130 (1, 163.0MB) | **0.0025 (803.5MB)** | TruffleRuby |

> **MRI**: Hash create 10k | **JRuby 10**: Struct read 100k | **JRuby 1.7**: Hash create 10k | **TruffleRuby**: Hash read 100k

### YAML

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| dump only medium 1k | 0.4976 (230, 270.4MB) | **0.3378 (3, 480.8MB)** | 0.7745 (21, 188.7MB) | 1.2078 (4, 1753.8MB) | JRuby 10 |
| dump/load medium 500 | 0.8198 (249, 270.4MB) | **0.5996 (8, 480.7MB)** | 1.0230 (35, 105.0MB) | 1.4108 (7, 2093.0MB) | JRuby 10 |
| dump/load small 1k | **0.0650\* (13, 270.1MB)** | 0.1777\* (683.9MB) | 0.0698\* (2, 208.6MB) | 0.1457\* (3, 1178.9MB) | MRI |
| load only medium 1k | 1.1245 (250, 270.4MB) | **0.8064 (12, 576.8MB)** | 1.2493 (49, 132.5MB) | 1.5331 (6, 1647.7MB) | JRuby 10 |

> **All agree**: dump/load small 1k

### Lazy Evaluation

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| find (eager) | 0.1502 (270.4MB) | 0.0566 (641.3MB) | - | **0.0022 (1119.6MB)** | TruffleRuby |
| lazy.find | 0.1480 (270.4MB) | 0.2178 (2, 153.3MB) | - | **0.0019\* (1140.1MB)** | TruffleRuby |
| lazy.map.first 10 | **0.0025\* (2, 352.2MB)** | 0.0129\* (227.9MB) | - | 0.0049 (1158.0MB) | MRI |
| lazy.select.first | 0.3046 (386, 320.2MB) | 0.4902 (9, 533.6MB) | - | **0.0343 (1191.9MB)** | TruffleRuby |
| map.first 10 (eager) | 0.2391 (5, 352.2MB) | 0.1451 (8, 175.9MB) | - | **0.0083 (1272.1MB)** | TruffleRuby |
| select.first (eager) | 0.2319 (6, 320.2MB) | 0.1190 (1, 513.4MB) | - | **0.0072 (1135.7MB)** | TruffleRuby |

> **MRI**: lazy.map.first 10 | **JRuby 10**: lazy.map.first 10 | **TruffleRuby**: lazy.find

### Grouping

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| dual select 100 | 0.0496 (1, 404.8MB) | 0.0474 (1, 68.7MB) | 0.0653 (2, 241.6MB) | **0.0017 (1155.8MB)** | TruffleRuby |
| each_with_object 100 | 0.0915 (1, 383.0MB) | 0.0988 (1, 44.4MB) | 0.1375 (3, 168.8MB) | **0.0370 (1220.6MB)** | TruffleRuby |
| group_by block 100 | 0.0663 (1, 382.8MB) | 0.0991 (1, 80.2MB) | 0.1112 (2, 191.7MB) | **0.0538 (1265.2MB)** | TruffleRuby |
| inject grouping 100 | 0.0958 (1, 383.0MB) | 0.1098 (1, 148.3MB) | 0.1458 (3, 142.7MB) | **0.0381 (1157.0MB)** | TruffleRuby |
| partition 2 groups 100 | 0.0355\* (1, 396.0MB) | 0.0389\* (260.7MB) | 0.0416\* (2, 208.7MB) | **0.0015\* (1170.0MB)** | TruffleRuby |

> **All agree**: partition 2 groups 100

### Metaprogramming

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| def method call 100k | 0.0040 (404.8MB) | 0.0016 (92.7MB) | 0.0054 (1, 113.2MB) | **0.0001 (1117.9MB)** | TruffleRuby |
| define_method call 100k | 0.0043 (404.8MB) | 0.0038 (196.7MB) | 0.0112 (250.9MB) | **0.0000 (1083.3MB)** | TruffleRuby |
| ivar_get 100k | 0.0044 (404.8MB) | 0.0016\* (64.8MB) | 0.0049 (234.6MB) | **0.0001 (1118.2MB)** | TruffleRuby |
| ivar_set 100k | 0.0036\* (404.8MB) | 0.0024 (112.8MB) | 0.0051 (1, 126.3MB) | **0.0003 (1110.1MB)** | TruffleRuby |
| method().call 100k | 0.0072 (404.8MB) | 0.0019 (1, 40.8MB) | 0.0046\* (198.5MB) | **0.0001 (1112.6MB)** | TruffleRuby |
| respond_to?+send 100k | 0.0083 (404.8MB) | 0.0076 (280.7MB) | 0.0082 (162.4MB) | **0.0000\* (1084.1MB)** | TruffleRuby |
| send 100k | 0.0062 (404.8MB) | 0.0042 (236.7MB) | 0.0076 (123.1MB) | **0.0000 (1083.8MB)** | TruffleRuby |

> **MRI**: ivar_set 100k | **JRuby 10**: ivar_get 100k | **JRuby 1.7**: method().call 100k | **TruffleRuby**: respond_to?+send 100k

### Exceptions

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| begin/rescue none 100k | 0.0042 (404.8MB) | 0.0016 (160.8MB) | 0.0090 (208.3MB) | **0.0001 (1094.0MB)** | TruffleRuby |
| nested throw/catch 10k | 0.0021 (410.9MB) | 0.0080 (296.4MB) | 0.0172 (212.4MB) | **0.0003 (1091.2MB)** | TruffleRuby |
| no exception 100k | 0.0036 (404.8MB) | 0.0012\* (136.8MB) | 0.0037\* (162.4MB) | **0.0000\* (1110.6MB)** | TruffleRuby |
| raise/rescue 10k | **0.0039 (1, 410.9MB)** | 0.2003 (2, 72.4MB) | 0.4110 (1, 185.5MB) | 0.2934 (1, 1094.8MB) | MRI |
| raise/rescue msg 10k | **0.0045 (1, 410.9MB)** | 0.1989 (1, 244.4MB) | 0.4121 (1, 169.5MB) | 0.3030 (1, 1044.1MB) | MRI |
| throw/catch 10k | 0.0013\* (410.9MB) | 0.0040 (264.4MB) | 0.0102 (186.0MB) | **0.0002 (1076.5MB)** | TruffleRuby |

> **MRI**: throw/catch 10k | **JRuby 10**: no exception 100k | **JRuby 1.7**: no exception 100k | **TruffleRuby**: no exception 100k

### String Freeze

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| -"" dedup 100k | 0.0035 (410.9MB) | 0.0012\* (104.5MB) | - | **0.0000 (1091.0MB)** | TruffleRuby |
| .freeze 100k | 0.0035\* (410.9MB) | 0.0012 (80.5MB) | 0.0051 (166.2MB) | **0.0000 (1090.8MB)** | TruffleRuby |
| dup 100k | 0.0058 (7, 410.9MB) | 0.0016 (148.5MB) | 0.0065 (225.6MB) | **0.0000\* (1091.0MB)** | TruffleRuby |
| interpolate 100k | 0.0081 (7, 410.9MB) | 0.0028 (240.5MB) | 0.0165 (219.0MB) | **0.0006 (1091.0MB)** | TruffleRuby |
| interpolate.freeze 100k | 0.0100 (7, 410.9MB) | 0.0032 (1, 68.6MB) | 0.0169 (215.7MB) | **0.0006 (1092.7MB)** | TruffleRuby |
| literal 100k | 0.0035 (410.9MB) | 0.0012 (56.5MB) | 0.0043\* (1, 106.8MB) | **0.0000 (1090.5MB)** | TruffleRuby |

> **MRI**: .freeze 100k | **JRuby 10**: -"" dedup 100k | **JRuby 1.7**: literal 100k | **TruffleRuby**: dup 100k

### Split Patterns

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each_line 10k | 0.0071 (8, 411.3MB) | 0.0049 (96.7MB) | **0.0044 (171.6MB)** | 0.0184 (1, 1206.8MB) | JRuby 1.7 |
| lines method 10k | 0.0051 (8, 411.3MB) | 0.0029 (148.7MB) | **0.0019 (181.3MB)** | 0.0038 (1192.2MB) | JRuby 1.7 |
| scan pattern 10k | 0.0223 (63, 411.5MB) | 0.0139 (1, 124.7MB) | 0.0200 (1, 128.9MB) | **0.0092 (1, 1292.1MB)** | TruffleRuby |
| split limit -1 10k | 0.0054 (8, 411.3MB) | **0.0022 (200.6MB)** | 0.0025 (189.3MB) | 0.0023\* (1144.4MB) | JRuby 10 |
| split limit 3 10k | 0.0018\* (2, 411.3MB) | 0.0040 (144.6MB) | **0.0014\* (129.9MB)** | 0.0134 (1118.8MB) | JRuby 1.7 |
| split newline 10k | 0.0054 (8, 411.3MB) | 0.0021\* (252.6MB) | **0.0018 (245.4MB)** | 0.0023 (1101.0MB) | JRuby 1.7 |
| split no limit 10k | 0.0054 (8, 411.3MB) | **0.0024 (124.6MB)** | 0.0036 (1, 106.8MB) | 0.0044 (1120.7MB) | JRuby 10 |

> **MRI**: split limit 3 10k | **JRuby 10**: split newline 10k | **JRuby 1.7**: split limit 3 10k | **TruffleRuby**: split limit -1 10k

## Operation Benchmarks

Format: **time** (gc collections, heap MB)

| Benchmark | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner | Factor |
|:----------|----------:|----------:|----------:|----------:|:------:|-------:|
| Array creation (Array.new) | 0.2353 (5, 542.6MB) | 0.1924 (6, 81.2MB) | 0.3075 (16, 164.3MB) | **0.0017 (1163.9MB)** | TruffleRuby | 186.1x |
| Array creation (literal) | 0.0037 (7, 470.3MB) | 0.0008 (281.0MB) | 0.0056 (176.8MB) | **0.0000 (1159.9MB)** | TruffleRuby | 482.5x |
| Array#compact | 0.0306 (1, 578.3MB) | 0.0271 (254.1MB) | 0.0418 (2, 240.3MB) | **0.0031 (1114.1MB)** | TruffleRuby | 13.7x |
| Array#each | 0.0256 (565.6MB) | 0.0307 (1, 271.3MB) | 0.0566 (2, 238.0MB) | **0.0004 (1143.4MB)** | TruffleRuby | 145.8x |
| Array#flatten | 0.0272 (3, 580.8MB) | 0.0181 (1, 74.5MB) | 0.0274 (1, 258.0MB) | **0.0013 (1148.6MB)** | TruffleRuby | 20.5x |
| Array#include? | 0.2042 (576.2MB) | 0.1936 (206.0MB) | 0.0820 (260.6MB) | **0.0304 (1090.7MB)** | TruffleRuby | 6.7x |
| Array#index | 0.2181 (575.7MB) | 0.1808 (214.0MB) | 0.1092 (276.2MB) | **0.0254 (1091.0MB)** | TruffleRuby | 8.6x |
| Array#map | 0.0121 (565.6MB) | 0.0146 (2, 115.5MB) | 0.0216 (1, 244.5MB) | **0.0005 (1051.0MB)** | TruffleRuby | 47.3x |
| Array#push (append) | 0.0163 (565.6MB) | 0.0094 (317.2MB) | 0.0399 (1, 247.5MB) | **0.0082 (1163.9MB)** | TruffleRuby | 4.9x |
| Array#reduce | 0.0312 (565.7MB) | 0.0449 (1, 108.1MB) | 0.0683 (4, 198.8MB) | **0.0004 (1050.1MB)** | TruffleRuby | 188.8x |
| Array#select | 0.0123 (565.6MB) | 0.0099 (199.5MB) | 0.0162 (277.7MB) | **0.0004 (1051.1MB)** | TruffleRuby | 40.3x |
| Array#sort | 0.0196 (565.7MB) | 0.0329 (184.1MB) | 0.0263 (262.6MB) | **0.0111 (1085.2MB)** | TruffleRuby | 3.0x |
| Array#sort_by | 0.0475 (15, 573.2MB) | 0.0786 (1, 171.6MB) | 0.0779 (2, 191.6MB) | **0.0323 (1, 1129.7MB)** | TruffleRuby | 2.4x |
| Array#uniq | 0.0354 (1, 576.7MB) | 0.0319 (202.0MB) | 0.0401 (1, 251.2MB) | **0.0153 (1095.8MB)** | TruffleRuby | 2.6x |
| Array#unshift (prepend) | **0.0003 (565.6MB)** | 0.0040 (321.2MB) | 0.0043 (253.3MB) | 0.0211 (1143.4MB) | MRI | 61.5x |
| CSV.generate | 0.0783 (109, 799.4MB) | 0.0449 (1031.6MB) | 0.0822 (4, 367.0MB) | **0.0354 (2, 1198.0MB)** | TruffleRuby | 2.3x |
| CSV.parse | **0.0863 (93, 799.3MB)** | 0.1306 (1, 379.6MB) | 0.0930 (3, 465.3MB) | 0.4011 (1, 1138.3MB) | MRI | 4.6x |
| Date.parse | **0.0163 (5, 799.8MB)** | 0.0380 (415.8MB) | 0.1069 (2, 443.0MB) | 0.4095 (1, 1250.3MB) | MRI | 25.1x |
| Deep hash tree creation | 0.0093 (18, 759.0MB) | 0.0104 (972.6MB) | 0.0112 (1, 366.8MB) | **0.0030 (1168.8MB)** | TruffleRuby | 3.7x |
| Float() parsing | **0.0061 (799.3MB)** | 0.0452 (1, 251.8MB) | 0.0188 (1, 400.5MB) | 0.0132 (1263.8MB) | MRI | 7.4x |
| Frozen string literals | 0.0028 (470.3MB) | 0.0012 (253.0MB) | 0.0036 (266.8MB) | **0.0002 (1179.6MB)** | TruffleRuby | 19.7x |
| Hash creation (from array) | 0.1885 (219, 571.3MB) | 0.1340 (3, 82.2MB) | 0.2058 (9, 277.6MB) | **0.0758 (4, 1562.5MB)** | TruffleRuby | 2.7x |
| Hash creation (literal) | 0.0151 (58, 571.3MB) | 0.0106 (1, 126.1MB) | 0.0163 (1, 295.1MB) | **0.0015 (1091.4MB)** | TruffleRuby | 10.5x |
| Hash map keys | 0.1419 (66, 758.1MB) | 0.1943 (1712.9MB) | 0.1849 (6, 352.5MB) | **0.0595 (3, 1173.2MB)** | TruffleRuby | 3.3x |
| Hash map values | 0.0657 (3, 758.2MB) | 0.1104 (1393.5MB) | 0.1642 (5, 370.8MB) | **0.0239 (1, 1189.0MB)** | TruffleRuby | 6.9x |
| Hash#[] (read) | 0.1186 (571.3MB) | 0.1228 (314.2MB) | 0.1393 (1, 292.7MB) | **0.0411 (1099.4MB)** | TruffleRuby | 3.4x |
| Hash#[]= (write) | 0.0989 (4, 686.7MB) | 0.4131 (5, 430.8MB) | 0.3304 (8, 144.3MB) | **0.0342 (1216.3MB)** | TruffleRuby | 12.1x |
| Hash#[]= 10k int keys x50 | 0.0277 (1, 733.3MB) | 0.0421 (1, 751.6MB) | 0.0261 (1, 317.2MB) | **0.0100 (1549.4MB)** | TruffleRuby | 4.2x |
| Hash#[]= 500k frozen string keys | 0.0518 (1, 707.1MB) | 0.2042 (1, 789.0MB) | 0.2285 (4, 301.5MB) | **0.0353 (1248.6MB)** | TruffleRuby | 6.5x |
| Hash#[]= 500k int keys | 0.0315 (1, 668.2MB) | 0.1629 (665.0MB) | 0.0310 (3, 184.7MB) | **0.0279 (2, 1063.6MB)** | TruffleRuby | 5.8x |
| Hash#[]= 500k string keys | 0.1182 (8, 703.8MB) | 0.4132 (1, 721.0MB) | 0.3613 (9, 152.8MB) | **0.0821 (1, 1357.9MB)** | TruffleRuby | 5.0x |
| Hash#[]= 500k symbol keys | **0.1736 (5, 779.3MB)** | 0.4330 (4, 900.4MB) | 0.4183 (12, 248.3MB) | 0.3034 (3, 1641.0MB) | MRI | 2.5x |
| Hash#each | 0.0732 (726.4MB) | 0.1099 (1, 935.9MB) | 0.2230 (10, 288.1MB) | **0.0150 (1442.8MB)** | TruffleRuby | 14.8x |
| Hash#keys 500k | **0.0288 (37, 746.8MB)** | 0.5118 (1, 1445.4MB) | 0.4706 (7, 368.3MB) | 0.2097 (5, 1589.0MB) | MRI | 17.8x |
| Hash#keys and Hash#values | **0.0134 (13, 729.1MB)** | 0.2712 (1, 851.9MB) | 0.4630 (2, 295.6MB) | 0.1079 (2, 1263.0MB) | MRI | 34.5x |
| Hash#merge | 0.1979 (41, 751.0MB) | 0.3983 (1, 1608.0MB) | 0.7604 (16, 418.3MB) | **0.1706 (6, 1746.1MB)** | TruffleRuby | 4.5x |
| Hash#select | 0.0876 (9, 761.7MB) | 0.2101 (1, 1274.2MB) | 0.2980 (7, 413.1MB) | **0.0500 (1, 1198.1MB)** | TruffleRuby | 6.0x |
| Hash#to_a | 0.1341 (99, 766.8MB) | **0.0483 (2, 880.6MB)** | 0.0783 (8, 368.9MB) | 0.0486 (4, 1618.4MB) | JRuby 10 | 2.8x |
| Integer() parsing | 0.0048 (799.3MB) | 0.0137 (1107.6MB) | 0.0067 (458.3MB) | **0.0033 (1198.9MB)** | TruffleRuby | 4.2x |
| JSON.generate | **0.0297 (1, 798.8MB)** | 0.0672 (1227.0MB) | 0.0936 (4, 411.5MB) | 0.1638 (6, 1912.5MB) | MRI | 5.5x |
| JSON.parse | **0.0509 (70, 759.0MB)** | 0.2263 (1, 951.0MB) | 0.1860 (5, 434.4MB) | 0.3470 (12, 2138.0MB) | MRI | 6.8x |
| Java HashMap 500k int keys | - | **0.0254 (1, 873.0MB)** | 0.0507 (3, 286.4MB) | - | JRuby 10 | 2.0x |
| Line-by-line parsing | 0.0329 (35, 802.4MB) | 0.0650 (979.8MB) | **0.0190 (1, 441.8MB)** | 0.0268 (1, 1558.4MB) | JRuby 1.7 | 3.4x |
| Nested hash access | 0.2172 (759.6MB) | 0.1951 (1450.2MB) | 0.2468 (2, 403.1MB) | **0.0733 (1174.9MB)** | TruffleRuby | 3.4x |
| Regex extraction | 0.0058 (18, 799.9MB) | 0.0113 (463.8MB) | 0.0075 (1, 335.4MB) | **0.0031 (1256.1MB)** | TruffleRuby | 3.6x |
| String encoding conversion | 0.0507 (1, 470.3MB) | 0.0953 (245.0MB) | **0.0256 (1, 223.3MB)** | 0.0841 (2, 1222.3MB) | JRuby 1.7 | 3.7x |
| String#gsub (regex) | 0.4345 (1592, 411.5MB) | 0.2146 (2, 76.9MB) | 0.2060 (7, 233.9MB) | **0.1203 (5, 1923.5MB)** | TruffleRuby | 3.6x |
| String#match | 0.0263 (57, 411.5MB) | 0.0359 (280.9MB) | 0.0529 (1, 232.9MB) | **0.0056 (1114.9MB)** | TruffleRuby | 9.4x |
| String#scan (regex) | 0.2994 (868, 411.5MB) | 0.1410 (5, 349.0MB) | 0.1369 (3, 232.2MB) | **0.0421 (5, 1613.1MB)** | TruffleRuby | 7.1x |
| String#split | 0.0926 (187, 411.5MB) | 0.0663 (3, 188.9MB) | 0.0435 (5, 123.7MB) | **0.0208 (3, 1270.5MB)** | TruffleRuby | 4.5x |
| Tokenization (scan) | 0.0206 (56, 799.9MB) | 0.0179 (679.8MB) | 0.0139 (417.3MB) | **0.0076 (1349.8MB)** | TruffleRuby | 2.7x |

## Summary

### Technique Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 19 |
| JRuby 10 | 10 |
| JRuby 1.7 | 8 |
| TruffleRuby | 148 |

### Operation Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 9 |
| JRuby 10 | 2 |
| JRuby 1.7 | 2 |
| TruffleRuby | 38 |

### Overall

| Ruby | Total Wins |
|:-----|----------:|
| TruffleRuby | 186 |
| MRI | 28 |
| JRuby 10 | 12 |
| JRuby 1.7 | 10 |

## Recommendations

Best technique to use for each category:

| Category | Recommendation |
|:---------|:---------------|
| String Building | MRI: `Array#join`, JRuby 10: `Array#join`, JRuby 1.7: `Array#join`, TruffleRuby: `interpolation` |
| Array Iteration | MRI: `reduce(:+)`, JRuby 10: `sum`, JRuby 1.7: `reduce(:+)`, TruffleRuby: `each + var` |
| Array Building | `Range#to_a` |
| Array Sorting | MRI: `sort_by`, JRuby 10: `sort_by`, JRuby 1.7: `sort!`, TruffleRuby: `sort!` |
| Hash Building | MRI: `zip.to_h`, JRuby 10: `zip.to_h`, JRuby 1.7: `Hash[]`, TruffleRuby: `[]= loop` |
| Hash Access | MRI: `[] existing`, JRuby 10: `dig`, JRuby 1.7: `fetch default`, TruffleRuby: `[] missing` |
| Hash Key Iteration | MRI: `keys.map`, JRuby 10: `keys.map`, JRuby 1.7: `keys.map`, TruffleRuby: `map { \|k,_\| }` |
| Conditionals | MRI: `array lookup`, JRuby 10: `ternary`, JRuby 1.7: `array lookup`, TruffleRuby: `array lookup` |
| Loops | MRI: `while`, JRuby 10: `step`, JRuby 1.7: `while`, TruffleRuby: `range.each` |
| String Search | `start_with?` |
| Filtering | MRI: `reject`, JRuby 10: `reject`, JRuby 1.7: `select &:even?`, TruffleRuby: `select &:even?` |
| Transform | MRI: `collect`, JRuby 10: `collect`, JRuby 1.7: `map`, TruffleRuby: `map &proc` |
| Number Conversion | MRI: `map(&:to_i)`, JRuby 10: `Integer()`, JRuby 1.7: `map(&:to_i)`, TruffleRuby: `Integer(s,10)` |
| Nil Handling | MRI: `compact.sum`, JRuby 10: `compact.sum`, JRuby 1.7: `\|\| default`, TruffleRuby: `compact.sum` |
| Object Duplication | `to_h` |
| Method Invocation | `direct` |
| Block/Yield | MRI: `map { }`, JRuby 10: `map { }`, JRuby 1.7: `map { }`, TruffleRuby: `block.call` |
| Eval | `direct (baseline)` |
| Caller | MRI: `caller_locations(0, 1)`, JRuby 10: `caller_locations(0, 1)`, JRuby 1.7: `caller()`, TruffleRuby: `caller_locations(0, 1)` |
| Marshal | `dump/load small 1k` |
| Memoization | MRI: `ivar \|\|= 100k`, JRuby 10: `ivar \|\|= 100k`, JRuby 1.7: `ivar \|\|= 100k`, TruffleRuby: `key? + []= 100k` |
| Set vs Array | MRI: `Set reuse 1k 10k`, JRuby 10: `Set reuse 10 100k`, JRuby 1.7: `Set reuse 1k 10k`, TruffleRuby: `Set reuse 1k 10k` |
| Mutex | `no sync 100k` |
| Thread-local | `local var 100k` |
| Data Structures | MRI: `Hash create 10k`, JRuby 10: `Struct read 100k`, JRuby 1.7: `Hash create 10k`, TruffleRuby: `Hash read 100k` |
| YAML | `dump/load small 1k` |
| Lazy Evaluation | MRI: `lazy.map.first 10`, JRuby 10: `lazy.map.first 10`, TruffleRuby: `lazy.find` |
| Grouping | `partition 2 groups 100` |
| Metaprogramming | MRI: `ivar_set 100k`, JRuby 10: `ivar_get 100k`, JRuby 1.7: `method().call 100k`, TruffleRuby: `respond_to?+send 100k` |
| Exceptions | MRI: `throw/catch 10k`, JRuby 10: `no exception 100k`, JRuby 1.7: `no exception 100k`, TruffleRuby: `no exception 100k` |
| String Freeze | MRI: `.freeze 100k`, JRuby 10: `-"" dedup 100k`, JRuby 1.7: `literal 100k`, TruffleRuby: `dup 100k` |
| Split Patterns | MRI: `split limit 3 10k`, JRuby 10: `split newline 10k`, JRuby 1.7: `split limit 3 10k`, TruffleRuby: `split limit -1 10k` |
