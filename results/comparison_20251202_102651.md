# Ruby Benchmark Comparison

_Generated: 2025-12-02 10:26:51_

## Versions Compared

- **MRI**: `ruby 3.4.7p58`
- **JRuby 10**: `JRuby 10.0.2.0 (3.4.2) [21.0.9]`
- **JRuby 1.7**: `JRuby 1.7.27 (1.9.3) [1.8.0_472]`

## Technique Comparisons

Format: **time** (gc, heap MB) | \* = best for that Ruby

### String Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| + operator | 0.0263 (11, 195.1MB) | 0.0203 (1, 135.3MB) | **0.0200 (3, 64.9MB)** | JRuby 1.7 |
| << shovel | **0.0003 (195.1MB)** | 0.0018 (139.3MB) | 0.0008 (71.8MB) | MRI |
| Array#join | **0.0001\* (195.1MB)** | 0.0011 (139.3MB) | 0.0010 (78.3MB) | MRI |
| StringIO | **0.0008 (195.1MB)** | 0.0021 (143.3MB) | 0.0009 (81.3MB) | MRI |
| concat | **0.0004 (195.1MB)** | 0.0011\* (139.3MB) | 0.0008\* (75.4MB) | MRI |
| each_with_object | **0.0005 (195.1MB)** | 0.0018 (147.3MB) | 0.0012 (90.0MB) | MRI |
| inject << | **0.0005 (195.1MB)** | 0.0016 (151.3MB) | 0.0012 (98.8MB) | MRI |
| interpolation | 0.0376 (11, 235.3MB) | **0.0239 (1, 235.5MB)** | 0.0256 (4, 95.7MB) | JRuby 10 |

> **MRI**: Array#join | **JRuby 10**: concat | **JRuby 1.7**: concat

### Array Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| each + var | 0.0252 (243.0MB) | **0.0144 (562.9MB)** | 0.0412 (194.6MB) | JRuby 10 |
| for in | 0.0287 (243.0MB) | **0.0216 (511.9MB)** | 0.0298 (1, 88.9MB) | JRuby 10 |
| reduce block | 0.0314 (243.0MB) | **0.0302 (314.9MB)** | 0.0674 (2, 99.9MB) | JRuby 10 |
| reduce(:+) | **0.0011\* (243.0MB)** | 0.0129 (451.5MB) | 0.0135\* (143.5MB) | MRI |
| sum | **0.0013 (243.0MB)** | 0.0016\* (295.5MB) | - | MRI |
| while index | **0.0264 (243.0MB)** | 0.1312 (267.9MB) | 0.0785 (1, 80.2MB) | MRI |

> **MRI**: reduce(:+) | **JRuby 10**: sum | **JRuby 1.7**: reduce(:+)

### Array Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| << in times | 0.0027 (243.0MB) | **0.0027 (619.9MB)** | 0.0034 (90.0MB) | JRuby 10 |
| Array.new block | 0.0023 (243.0MB) | **0.0021 (559.9MB)** | 0.0026 (146.4MB) | JRuby 10 |
| Range#map | 0.0030 (243.0MB) | **0.0027 (591.9MB)** | 0.0027 (190.0MB) | JRuby 10 |
| Range#to_a | 0.0012\* (243.0MB) | 0.0018 (535.9MB) | **0.0004\* (106.1MB)** | JRuby 1.7 |
| each_with_object | 0.0035 (243.0MB) | **0.0030 (679.9MB)** | 0.0065 (1, 73.7MB) | JRuby 10 |
| push in times | 0.0032 (243.0MB) | **0.0018\* (651.9MB)** | 0.0064 (139.4MB) | JRuby 10 |

> **MRI**: Range#to_a | **JRuby 10**: push in times | **JRuby 1.7**: Range#to_a

### Array Sorting

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| sort | **0.0076 (243.0MB)** | 0.0371 (695.9MB) | 0.0103 (100.2MB) | MRI |
| sort block | **0.0301 (243.0MB)** | 0.0396 (947.9MB) | 0.0501 (1, 117.0MB) | MRI |
| sort! | **0.0073\* (243.0MB)** | 0.0357 (711.9MB) | 0.0099\* (126.7MB) | MRI |
| sort_by | **0.0075 (243.0MB)** | 0.0213\* (975.9MB) | 0.0196 (159.4MB) | MRI |
| sort_by(&:itself) | **0.0074 (243.0MB)** | 0.0218 (92.8MB) | - | MRI |

> **MRI**: sort! | **JRuby 10**: sort_by | **JRuby 1.7**: sort!

### Hash Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Hash[] | **0.0050 (253.2MB)** | 0.0108\* (272.8MB) | 0.0052\* (195.3MB) | MRI |
| []= loop | **0.0071 (246.8MB)** | 0.0262 (140.8MB) | 0.0096 (91.0MB) | MRI |
| each_with_object | **0.0078 (252.7MB)** | 0.0149 (200.8MB) | 0.0130 (172.7MB) | MRI |
| map.to_h | **0.0078 (251.3MB)** | 0.0117 (248.8MB) | - | MRI |
| zip.to_h | **0.0039\* (252.7MB)** | 0.0169 (164.8MB) | - | MRI |

> **MRI**: zip.to_h | **JRuby 10**: Hash[] | **JRuby 1.7**: Hash[]

### Hash Access

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| [] existing | **0.0289 (314.8MB)** | 0.0414 (496.8MB) | 0.0501 (1, 180.7MB) | MRI |
| [] missing | **0.0299 (318.6MB)** | 0.0403 (604.8MB) | 0.0464 (1, 182.9MB) | MRI |
| dig | **0.0288\* (318.6MB)** | 0.0350 (764.8MB) | - | MRI |
| fetch default | 0.0342 (318.6MB) | **0.0338\* (656.8MB)** | 0.0480 (1, 182.2MB) | JRuby 10 |
| fetch existing | **0.0299 (318.6MB)** | 0.0391 (548.8MB) | 0.0591 (1, 180.6MB) | MRI |
| || default | **0.0336 (318.6MB)** | 0.0389 (712.8MB) | 0.0444\* (237.7MB) | MRI |

> **MRI**: dig | **JRuby 10**: fetch default | **JRuby 1.7**: || default

### Conditionals

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| array lookup | **0.0244\* (304.3MB)** | 0.0251\* (416.0MB) | 0.0364\* (1, 211.7MB) | MRI |
| case/when | 0.1020 (304.6MB) | **0.0510 (200.0MB)** | 0.1024 (1, 229.7MB) | JRuby 10 |
| hash lookup | **0.0351 (304.3MB)** | 0.0450 (308.0MB) | 0.0459 (1, 227.5MB) | MRI |
| if/elsif | 0.0358 (306.6MB) | **0.0286 (1008.8MB)** | 0.0429 (248.7MB) | JRuby 10 |
| ternary | 0.0355 (309.3MB) | **0.0286 (900.8MB)** | 0.0490 (1, 195.3MB) | JRuby 10 |

> **All agree**: array lookup

### Loops

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| loop+break | **0.0356 (304.3MB)** | 0.0503 (902.8MB) | 0.0863 (319.9MB) | MRI |
| range.each | 0.0250 (304.3MB) | **0.0174\* (997.9MB)** | 0.0314\* (1, 302.0MB) | JRuby 10 |
| step | 0.0248 (304.3MB) | **0.0177 (474.8MB)** | 0.0321 (1, 227.8MB) | JRuby 10 |
| times | 0.0314 (304.3MB) | **0.0274 (1, 201.9MB)** | 0.0322 (1, 245.6MB) | JRuby 10 |
| upto | 0.0251 (304.3MB) | **0.0175 (597.9MB)** | 0.0317 (1, 210.9MB) | JRuby 10 |
| while | **0.0226\* (304.3MB)** | 0.1036 (724.0MB) | 0.0355 (1, 258.7MB) | MRI |

> **MRI**: while | **JRuby 10**: range.each | **JRuby 1.7**: range.each

### String Search

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| =~ regex | **0.2088 (15, 251.4MB)** | 0.2403 (437.2MB) | 0.2548 (1, 241.6MB) | MRI |
| [] | 0.1512 (1, 304.4MB) | **0.0590 (946.8MB)** | 0.0602 (271.6MB) | JRuby 10 |
| include? | 0.1489 (304.3MB) | **0.0597 (922.8MB)** | 0.0604 (222.2MB) | JRuby 10 |
| index | 0.1499 (304.3MB) | **0.0593 (930.8MB)** | 0.0626 (243.8MB) | JRuby 10 |
| match? | **0.1885 (6, 251.2MB)** | 0.2321 (1, 197.2MB) | - | MRI |
| start_with? | 0.0039\* (251.4MB) | **0.0023\* (445.2MB)** | 0.0277\* (2, 331.4MB) | JRuby 10 |

> **All agree**: start_with?

### Filtering

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| each + << | 0.0142 (262.9MB) | **0.0077 (805.2MB)** | 0.0175 (292.9MB) | JRuby 10 |
| filter_map | 0.0183 (268.7MB) | **0.0102 (977.2MB)** | - | JRuby 10 |
| partition[0] | **0.0176 (268.7MB)** | 0.0219 (917.2MB) | 0.0183 (330.3MB) | MRI |
| reject | 0.0121 (262.9MB) | **0.0055\* (749.2MB)** | 5.7807 (315.5MB) | JRuby 10 |
| select | 0.0120\* (261.0MB) | **0.0058 (529.2MB)** | 0.0136 (324.3MB) | JRuby 10 |
| select &:even? | 0.0177 (262.9MB) | 0.0167 (689.2MB) | **0.0080\* (347.7MB)** | JRuby 1.7 |

> **MRI**: select | **JRuby 10**: reject | **JRuby 1.7**: select &:even?

### Transform

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| collect | 0.0118\* (278.2MB) | **0.0089 (530.9MB)** | 0.0202 (151.6MB) | JRuby 10 |
| each_with_object | 0.0189 (278.8MB) | **0.0142 (686.9MB)** | 0.0438 (1, 95.5MB) | JRuby 10 |
| inject | **0.0197 (279.3MB)** | 0.0251 (886.9MB) | 0.0404 (1, 130.0MB) | MRI |
| map | 0.0120 (276.3MB) | **0.0077\* (270.9MB)** | 0.0194\* (105.6MB) | JRuby 10 |
| map &proc | **0.0122 (278.2MB)** | 0.0130 (398.9MB) | 0.0281 (1, 88.4MB) | MRI |

> **MRI**: collect | **JRuby 10**: map | **JRuby 1.7**: map

### Number Conversion

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Integer() | 0.0048 (281.5MB) | **0.0048\* (1058.9MB)** | 0.0067 (110.9MB) | JRuby 10 |
| Integer(s,10) | 0.0069 (281.5MB) | 0.0072 (1106.9MB) | **0.0068 (173.0MB)** | JRuby 1.7 |
| map { to_i } | **0.0047 (281.5MB)** | 0.0061 (1006.9MB) | 0.0074 (167.0MB) | MRI |
| map(&:to_i) | **0.0037\* (281.5MB)** | 0.0055 (954.9MB) | 0.0045\* (103.8MB) | MRI |

> **MRI**: map(&:to_i) | **JRuby 10**: Integer() | **JRuby 1.7**: map(&:to_i)

### Nil Handling

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| compact.sum | **0.0015\* (282.5MB)** | 0.0034\* (575.9MB) | - | MRI |
| nil? ? 0 : itself | 0.0166 (282.5MB) | **0.0107 (627.9MB)** | - | JRuby 10 |
| to_i | 0.0199 (282.5MB) | **0.0100 (563.9MB)** | 0.0205 (1, 97.7MB) | JRuby 10 |
| v.nil? ternary | 0.0138 (282.7MB) | **0.0114 (511.9MB)** | 0.0192 (103.7MB) | JRuby 10 |
| || default | **0.0134 (279.9MB)** | 0.0275 (455.9MB) | 0.0142\* (110.9MB) | MRI |

> **MRI**: compact.sum | **JRuby 10**: compact.sum | **JRuby 1.7**: || default

### Object Duplication

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Hash[] | 0.0080 (1, 297.6MB) | **0.0076 (1039.9MB)** | 0.0101 (1, 92.0MB) | JRuby 10 |
| clone | 0.0108 (300.5MB) | **0.0076 (931.9MB)** | 0.0112 (1, 100.2MB) | JRuby 10 |
| dup | 0.0118 (1, 297.6MB) | **0.0064 (775.9MB)** | 0.0105 (1, 99.6MB) | JRuby 10 |
| merge({}) | 0.0168 (5, 301.4MB) | **0.0081 (1211.9MB)** | 0.0097 (140.6MB) | JRuby 10 |
| to_h | 0.0038\* (296.8MB) | **0.0018\* (1219.9MB)** | 0.0037\* (154.8MB) | JRuby 10 |

> **All agree**: to_h

## Operation Benchmarks

Format: **time** (gc collections, heap MB)

| Benchmark | MRI | JRuby 10 | JRuby 1.7 | Winner | Factor |
|:----------|----------:|----------:|----------:|:------:|-------:|
| Array creation (Array.new) | 0.2389 (1, 429.7MB) | **0.2021 (1, 616.1MB)** | 0.3045 (5, 164.7MB) | JRuby 10 | 1.5x |
| Array creation (literal) | 0.0034 (2, 336.9MB) | **0.0014 (1304.0MB)** | 0.0060 (163.4MB) | JRuby 10 | 4.3x |
| Array#compact | 0.2969 (3, 466.6MB) | **0.2763 (1252.5MB)** | 0.4009 (7, 193.9MB) | JRuby 10 | 1.5x |
| Array#each | **0.2550 (429.7MB)** | 0.3140 (1, 665.3MB) | 0.4822 (6, 147.3MB) | MRI | 1.9x |
| Array#flatten | 0.5324 (4, 473.7MB) | **0.3288 (1365.0MB)** | 0.4900 (5, 327.5MB) | JRuby 10 | 1.6x |
| Array#include? | 1.9526 (466.5MB) | 1.6998 (786.7MB) | **0.5480 (283.1MB)** | JRuby 1.7 | 3.6x |
| Array#index | 2.1245 (466.5MB) | 1.7242 (814.7MB) | **0.9822 (325.1MB)** | JRuby 1.7 | 2.2x |
| Array#map | 0.1198 (1, 429.8MB) | **0.1164 (1007.5MB)** | 0.2056 (3, 210.8MB) | JRuby 10 | 1.8x |
| Array#push (append) | 0.0169 (429.7MB) | **0.0087 (772.1MB)** | 0.0514 (1, 119.3MB) | JRuby 10 | 5.9x |
| Array#reduce | **0.3227 (429.7MB)** | 0.4195 (1, 1056.7MB) | 0.6790 (11, 243.6MB) | MRI | 2.1x |
| Array#select | 0.1239 (1, 429.8MB) | **0.1198 (1, 581.5MB)** | 0.1532 (1, 284.9MB) | JRuby 10 | 1.3x |
| Array#sort | **0.2655 (1, 430.1MB)** | 0.4762 (714.1MB) | 0.3345 (1, 269.3MB) | MRI | 1.8x |
| Array#sort_by | **0.6741 (25, 455.5MB)** | 1.1044 (1, 588.7MB) | 1.1601 (9, 218.8MB) | MRI | 1.7x |
| Array#uniq | 0.4512 (7, 466.6MB) | **0.3862 (1, 770.7MB)** | 0.4919 (4, 250.9MB) | JRuby 10 | 1.3x |
| Array#unshift (prepend) | **0.0004 (429.7MB)** | 0.0041 (776.1MB) | 0.0041 (125.1MB) | MRI | 11.7x |
| CSV.generate | 0.7633 (409, 588.0MB) | **0.3747 (3, 158.9MB)** | 0.6560 (12, 177.0MB) | JRuby 10 | 2.0x |
| CSV.parse | **0.8223 (285, 606.7MB)** | 1.6041 (2, 214.5MB) | 0.8375 (10, 169.8MB) | MRI | 2.0x |
| Date.parse | 0.1677 (17, 588.7MB) | **0.1036 (1, 63.3MB)** | 1.0001 (8, 149.7MB) | JRuby 10 | 9.7x |
| Deep hash tree creation | 0.0071 (6, 528.5MB) | **0.0057 (1000.6MB)** | 0.0071 (213.1MB) | JRuby 10 | 1.2x |
| Float() parsing | **0.0630 (588.0MB)** | 0.1618 (1, 136.2MB) | 0.2023 (3, 125.8MB) | MRI | 3.2x |
| Frozen string literals | 0.0146 (336.8MB) | **0.0069 (1284.0MB)** | 0.0215 (1, 116.7MB) | JRuby 10 | 3.1x |
| Hash creation (from array) | 0.0871 (20, 470.4MB) | **0.0538 (1, 632.7MB)** | 0.1028 (1, 298.1MB) | JRuby 10 | 1.9x |
| Hash creation (literal) | 0.0149 (17, 468.6MB) | **0.0103 (1066.7MB)** | 0.0255 (1, 226.1MB) | JRuby 10 | 2.5x |
| Hash map keys | **0.1240 (23, 527.7MB)** | 0.2422 (1, 540.9MB) | 0.2075 (2, 190.9MB) | MRI | 2.0x |
| Hash map values | **0.0565 (1, 527.8MB)** | 0.0918 (944.9MB) | 0.0778 (1, 206.1MB) | MRI | 1.6x |
| Hash#[] (read) | **0.0873 (470.4MB)** | 0.0981 (932.7MB) | 0.1039 (1, 299.2MB) | MRI | 1.2x |
| Hash#[]= (write) | **0.0335 (525.8MB)** | 0.1484 (1212.7MB) | 0.1664 (2, 76.0MB) | MRI | 5.0x |
| Hash#each | **0.0696 (525.9MB)** | 0.0847 (873.7MB) | 0.1677 (4, 120.6MB) | MRI | 2.4x |
| Hash#keys and Hash#values | **0.0142 (3, 526.0MB)** | 0.1487 (1213.7MB) | 0.1347 (1, 127.0MB) | MRI | 10.5x |
| Hash#merge | 0.1642 (13, 526.6MB) | 0.2680 (1, 858.7MB) | **0.1460 (3, 179.7MB)** | JRuby 1.7 | 1.8x |
| Hash#select | **0.0834 (3, 527.8MB)** | 0.1312 (1, 627.2MB) | 0.1671 (2, 240.9MB) | MRI | 2.0x |
| Hash#to_a | 0.1295 (51, 533.7MB) | **0.0424 (940.6MB)** | 0.0519 (3, 145.8MB) | JRuby 10 | 3.1x |
| Integer() parsing | **0.0462 (588.0MB)** | 0.0560 (280.0MB) | 0.0677 (1, 127.9MB) | MRI | 1.5x |
| JSON.generate | **0.3054 (2, 605.5MB)** | 0.6971 (1, 637.8MB) | 0.9256 (12, 246.0MB) | MRI | 3.0x |
| JSON.parse | **0.5207 (260, 528.6MB)** | 2.4093 (3, 653.8MB) | 1.8519 (15, 112.2MB) | MRI | 4.6x |
| Line-by-line parsing | 0.3157 (47, 601.6MB) | **0.1247 (2, 165.3MB)** | 0.1771 (4, 154.0MB) | JRuby 10 | 2.5x |
| Nested hash access | 0.1791 (528.8MB) | **0.1338 (743.2MB)** | 0.1731 (1, 196.7MB) | JRuby 10 | 1.3x |
| Regex extraction | 0.0552 (32, 590.1MB) | **0.0544 (387.3MB)** | 0.0658 (1, 193.8MB) | JRuby 10 | 1.2x |
| String encoding conversion | 2.3785 (27, 332.0MB) | 5.1614 (1, 1252.0MB) | **1.1334 (25, 128.1MB)** | JRuby 1.7 | 4.6x |
| String#gsub (regex) | 8.5370 (9631, 325.1MB) | **3.6572 (1, 1347.8MB)** | 3.9978 (47, 150.4MB) | JRuby 10 | 2.3x |
| String#match | **0.2598 (175, 325.5MB)** | 0.4013 (1128.1MB) | 0.4050 (4, 93.8MB) | MRI | 1.6x |
| String#scan (regex) | 7.3976 (5999, 325.5MB) | 2.7004 (13, 417.8MB) | **2.6778 (24, 157.5MB)** | JRuby 1.7 | 2.8x |
| String#split | 3.5366 (506, 294.7MB) | **1.9006 (10, 745.9MB)** | 2.9796 (61, 113.0MB) | JRuby 10 | 1.9x |
| Tokenization (scan) | 0.5892 (444, 589.3MB) | 0.4008 (2, 292.0MB) | **0.3391 (2, 255.5MB)** | JRuby 1.7 | 1.7x |

## Summary

### Technique Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 37 |
| JRuby 10 | 37 |
| JRuby 1.7 | 4 |

### Operation Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 18 |
| JRuby 10 | 20 |
| JRuby 1.7 | 6 |

### Overall

| Ruby | Total Wins |
|:-----|----------:|
| JRuby 10 | 57 |
| MRI | 55 |
| JRuby 1.7 | 10 |

## Recommendations

Best technique to use for each category:

| Category | Recommendation |
|:---------|:---------------|
| String Building | MRI: `Array#join`, JRuby 10: `concat`, JRuby 1.7: `concat` |
| Array Iteration | MRI: `reduce(:+)`, JRuby 10: `sum`, JRuby 1.7: `reduce(:+)` |
| Array Building | MRI: `Range#to_a`, JRuby 10: `push in times`, JRuby 1.7: `Range#to_a` |
| Array Sorting | MRI: `sort!`, JRuby 10: `sort_by`, JRuby 1.7: `sort!` |
| Hash Building | MRI: `zip.to_h`, JRuby 10: `Hash[]`, JRuby 1.7: `Hash[]` |
| Hash Access | MRI: `dig`, JRuby 10: `fetch default`, JRuby 1.7: `|| default` |
| Conditionals | `array lookup` |
| Loops | MRI: `while`, JRuby 10: `range.each`, JRuby 1.7: `range.each` |
| String Search | `start_with?` |
| Filtering | MRI: `select`, JRuby 10: `reject`, JRuby 1.7: `select &:even?` |
| Transform | MRI: `collect`, JRuby 10: `map`, JRuby 1.7: `map` |
| Number Conversion | MRI: `map(&:to_i)`, JRuby 10: `Integer()`, JRuby 1.7: `map(&:to_i)` |
| Nil Handling | MRI: `compact.sum`, JRuby 10: `compact.sum`, JRuby 1.7: `|| default` |
| Object Duplication | `to_h` |
