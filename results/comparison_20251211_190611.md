# Ruby Benchmark Comparison

_Generated: 2025-12-11 19:06:11_

## Versions Compared

- **MRI**: `ruby 3.4.7p58`
- **JRuby 10**: `JRuby 10.0.2.0 (3.4.2) [21.0.9]`
- **JRuby 1.7**: `JRuby 1.7.27 (1.9.3) [1.8.0_472]`

## Technique Comparisons

Format: **time** (gc, heap MB) | \* = best for that Ruby

### String Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| + operator | **0.0016 (2, 51.7MB)** | 0.0023 (1, 55.9MB) | 0.0024 (125.5MB) | MRI |
| << shovel | **0.0001 (51.8MB)** | 0.0005 (59.9MB) | 0.0004 (128.0MB) | MRI |
| Array#join | **0.0000\* (51.8MB)** | 0.0004\* (59.9MB) | 0.0004 (130.6MB) | MRI |
| StringIO | **0.0002 (51.8MB)** | 0.0008 (59.9MB) | 0.0005 (130.6MB) | MRI |
| concat | **0.0001 (51.8MB)** | 0.0005 (59.9MB) | 0.0004 (128.0MB) | MRI |
| each_with_object | **0.0001 (51.8MB)** | 0.0005 (59.9MB) | 0.0004 (133.0MB) | MRI |
| inject << | **0.0001 (51.8MB)** | 0.0005 (63.9MB) | 0.0003\* (16.0MB) | MRI |
| interpolation | **0.0022 (1, 52.2MB)** | 0.0025 (1, 76.0MB) | 0.0023 (1, 15.9MB) | MRI |

> **MRI**: Array#join | **JRuby 10**: Array#join | **JRuby 1.7**: inject <<

### Array Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| each + var | 0.0325 (61.3MB) | **0.0242 (1, 229.5MB)** | 0.0532 (2, 172.1MB) | JRuby 10 |
| for in | 0.0368 (61.3MB) | **0.0232 (1, 244.0MB)** | 0.0395 (1, 126.6MB) | JRuby 10 |
| reduce block | **0.0395 (61.3MB)** | 0.0404 (1, 264.5MB) | 0.0771 (5, 153.5MB) | MRI |
| reduce(:+) | **0.0011\* (61.3MB)** | 0.0241 (1, 113.3MB) | 0.0254\* (2, 90.2MB) | MRI |
| sum | 0.0015 (61.3MB) | **0.0013\* (140.0MB)** | - | JRuby 10 |
| while index | **0.0342 (61.3MB)** | 0.1586 (1, 284.2MB) | 0.0908 (2, 152.1MB) | MRI |

> **MRI**: reduce(:+) | **JRuby 10**: sum | **JRuby 1.7**: reduce(:+)

### Array Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| << in times | 0.0035 (65.7MB) | **0.0025 (408.0MB)** | 0.0050 (1, 78.1MB) | JRuby 10 |
| Array.new block | 0.0030 (64.9MB) | **0.0022 (316.0MB)** | 0.0044 (1, 81.5MB) | JRuby 10 |
| Range#map | 0.0038 (65.5MB) | **0.0027 (360.0MB)** | 0.0040 (146.9MB) | JRuby 10 |
| Range#to_a | 0.0014\* (62.6MB) | 0.0016\* (276.0MB) | **0.0005\* (152.8MB)** | JRuby 1.7 |
| each_with_object | 0.0045 (65.7MB) | **0.0043 (1, 96.4MB)** | 0.0068 (134.7MB) | JRuby 10 |
| push in times | 0.0041 (65.7MB) | **0.0028 (452.0MB)** | 0.0077 (154.6MB) | JRuby 10 |

> **All agree**: Range#to_a

### Array Sorting

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| sort | **0.0096 (66.1MB)** | 0.0380 (120.4MB) | 0.0131 (175.8MB) | MRI |
| sort block | **0.0392 (66.1MB)** | 0.1044 (340.4MB) | 0.0591 (2, 165.1MB) | MRI |
| sort! | **0.0094\* (66.1MB)** | 0.0237\* (140.4MB) | 0.0103\* (79.7MB) | MRI |
| sort_by | **0.0097 (66.1MB)** | 0.0243 (380.4MB) | 0.0294 (1, 85.8MB) | MRI |
| sort_by(&:itself) | **0.0096 (66.1MB)** | 0.0253 (436.4MB) | - | MRI |

> **All agree**: sort!

### Hash Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Hash[] | 0.0082 (1, 89.0MB) | 0.0115\* (319.9MB) | **0.0062\* (201.9MB)** | JRuby 1.7 |
| []= loop | **0.0077 (74.7MB)** | 0.0249 (1, 119.9MB) | 0.0141 (185.6MB) | MRI |
| each_with_object | **0.0098 (89.8MB)** | 0.0167 (211.9MB) | 0.0184 (165.9MB) | MRI |
| map.to_h | **0.0101 (1, 89.8MB)** | 0.0152 (283.9MB) | - | MRI |
| zip.to_h | **0.0058\* (1, 81.2MB)** | 0.0120 (159.9MB) | - | MRI |

> **MRI**: zip.to_h | **JRuby 10**: Hash[] | **JRuby 1.7**: Hash[]

### Hash Access

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| [] existing | **0.0371\* (149.1MB)** | 0.0497 (285.5MB) | 0.0619 (2, 192.1MB) | MRI |
| [] missing | **0.0442 (160.7MB)** | 0.0510 (445.5MB) | 0.0601 (1, 202.1MB) | MRI |
| dig | **0.0383 (160.7MB)** | 0.0453 (391.6MB) | - | MRI |
| fetch default | 0.0489 (160.7MB) | **0.0483 (1, 231.6MB)** | 0.0583\* (1, 205.5MB) | JRuby 10 |
| fetch existing | **0.0392 (160.7MB)** | 0.0438\* (365.5MB) | 0.0665 (2, 196.6MB) | MRI |
| \|\| default | **0.0495 (160.7MB)** | 0.0509 (311.6MB) | 0.0595 (1, 203.1MB) | MRI |

> **MRI**: [] existing | **JRuby 10**: fetch existing | **JRuby 1.7**: fetch default

### Hash Key Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| each { \|k,_\| } | 1.5758 (166, 102.8MB) | **1.1916 (16, 649.9MB)** | 2.5165 (86, 328.2MB) | JRuby 10 |
| each_key.map | 1.8500 (176, 122.0MB) | 2.5515 (19, 561.5MB) | **1.6951 (70, 210.8MB)** | JRuby 1.7 |
| keys.each | 1.5303 (166, 102.8MB) | **1.3776 (17, 354.8MB)** | 1.7531 (63, 181.9MB) | JRuby 10 |
| keys.map | 1.4624\* (157, 148.0MB) | **0.9092\* (16, 637.4MB)** | 1.5880\* (60, 260.2MB) | JRuby 10 |
| map { \|k,_\| } | 1.7346 (176, 143.4MB) | **1.7320 (26, 413.7MB)** | 2.9356 (96, 240.9MB) | JRuby 10 |

> **All agree**: keys.map

### Conditionals

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| array lookup | 0.0307\* (142.8MB) | **0.0276 (517.6MB)** | 0.0470\* (1, 302.7MB) | JRuby 10 |
| case/when | 0.1291 (142.9MB) | **0.0597 (677.6MB)** | 0.1222 (3, 251.3MB) | JRuby 10 |
| hash lookup | **0.0453 (142.8MB)** | 0.0623 (1, 353.6MB) | 0.0608 (1, 278.6MB) | MRI |
| if/elsif | 0.0453 (143.4MB) | **0.0222\* (513.6MB)** | 0.0657 (1, 308.6MB) | JRuby 10 |
| ternary | 0.0454 (123.6MB) | **0.0363 (353.6MB)** | 0.0635 (1, 284.2MB) | JRuby 10 |

> **MRI**: array lookup | **JRuby 10**: if/elsif | **JRuby 1.7**: array lookup

### Loops

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| loop+break | **0.0455 (142.8MB)** | 0.0648 (1, 585.9MB) | 0.1071 (2, 341.5MB) | MRI |
| range.each | 0.0319 (142.8MB) | **0.0223 (1, 617.7MB)** | 0.0541 (2, 297.5MB) | JRuby 10 |
| step | 0.0321 (142.8MB) | **0.0221 (1, 365.8MB)** | 0.0552 (3, 244.4MB) | JRuby 10 |
| times | 0.0404 (142.8MB) | **0.0209\* (693.7MB)** | 0.0564 (3, 227.6MB) | JRuby 10 |
| upto | 0.0320 (142.8MB) | **0.0223 (1, 441.7MB)** | 0.0539 (2, 346.4MB) | JRuby 10 |
| while | **0.0291\* (142.8MB)** | 0.1346 (1, 521.6MB) | 0.0459\* (2, 270.1MB) | MRI |

> **MRI**: while | **JRuby 10**: times | **JRuby 1.7**: while

### String Search

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| =~ regex | **0.2695 (46, 151.0MB)** | 0.3080 (1, 414.5MB) | 0.3112 (2, 238.8MB) | MRI |
| [] | 0.1954 (3, 142.9MB) | **0.0738 (649.9MB)** | 0.0776 (318.9MB) | JRuby 10 |
| include? | 0.1934 (142.8MB) | **0.0728 (609.9MB)** | 0.0781 (1, 238.8MB) | JRuby 10 |
| index | 0.1938 (142.8MB) | **0.0743 (625.9MB)** | 0.0778 (275.5MB) | JRuby 10 |
| match? | **0.2414 (19, 150.8MB)** | 0.2856 (478.5MB) | - | MRI |
| start_with? | 0.0048\* (150.9MB) | **0.0028\* (430.5MB)** | 0.0469\* (8, 235.7MB) | JRuby 10 |

> **All agree**: start_with?

### Filtering

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| each + << | 0.0176 (166.3MB) | **0.0098 (552.0MB)** | 0.0250 (1, 57.1MB) | JRuby 10 |
| filter_map | 0.0211 (172.1MB) | **0.0135 (411.6MB)** | - | JRuby 10 |
| partition[0] | **0.0217 (172.1MB)** | 0.0336 (720.0MB) | 0.0245 (1, 170.8MB) | MRI |
| reject | 0.0153\* (160.5MB) | **0.0065\* (464.0MB)** | 7.2504 (177.7MB) | JRuby 10 |
| select | 0.0154 (154.8MB) | **0.0071 (538.5MB)** | 0.0697 (2, 74.4MB) | JRuby 10 |
| select &:even? | 0.0225 (154.8MB) | 0.0212 (1, 376.0MB) | **0.0125\* (1, 154.0MB)** | JRuby 1.7 |

> **MRI**: reject | **JRuby 10**: reject | **JRuby 1.7**: select &:even?

### Transform

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| collect | 0.0150\* (173.5MB) | **0.0097 (644.1MB)** | 0.0245\* (1, 203.0MB) | JRuby 10 |
| each_with_object | **0.0234 (169.2MB)** | 0.0261 (4, 280.6MB) | 0.0452 (2, 112.4MB) | MRI |
| inject | 0.0249 (165.4MB) | **0.0238 (470.6MB)** | 0.0503 (2, 192.0MB) | JRuby 10 |
| map | 0.0151 (173.5MB) | **0.0090\* (635.6MB)** | 0.0253 (1, 200.7MB) | JRuby 10 |
| map &proc | **0.0154 (173.5MB)** | 0.0183 (1, 452.1MB) | 0.0263 (1, 200.9MB) | MRI |

> **MRI**: collect | **JRuby 10**: map | **JRuby 1.7**: collect

### Number Conversion

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Integer() | **0.0060 (167.5MB)** | 0.0065 (1, 240.3MB) | 0.0092 (1, 115.0MB) | MRI |
| Integer(s,10) | 0.0087 (167.5MB) | **0.0077 (316.3MB)** | 0.0084 (1, 85.0MB) | JRuby 10 |
| map { to_i } | **0.0057 (167.5MB)** | 0.0059 (503.2MB) | 0.0071 (144.7MB) | MRI |
| map(&:to_i) | 0.0048\* (167.5MB) | 0.0057\* (427.2MB) | **0.0047\* (167.7MB)** | JRuby 1.7 |

> **All agree**: map(&:to_i)

### Nil Handling

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| compact.sum | **0.0018\* (185.0MB)** | 0.0047\* (1, 115.0MB) | - | MRI |
| nil? ? 0 : itself | 0.0211 (185.0MB) | **0.0119 (195.0MB)** | - | JRuby 10 |
| to_i | 0.0252 (185.0MB) | **0.0099 (417.9MB)** | 0.0238 (1, 159.2MB) | JRuby 10 |
| v.nil? ternary | 0.0178 (185.0MB) | **0.0107 (337.9MB)** | 0.0282 (1, 116.1MB) | JRuby 10 |
| \|\| default | 0.0171 (179.1MB) | **0.0112 (257.9MB)** | 0.0190\* (195.4MB) | JRuby 10 |

> **MRI**: compact.sum | **JRuby 10**: compact.sum | **JRuby 1.7**: \|\| default

### Object Duplication

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Hash[] | 0.0085 (2, 208.0MB) | **0.0074 (1, 145.5MB)** | 0.0091 (1, 107.7MB) | JRuby 10 |
| clone | 0.0139 (2, 201.4MB) | **0.0086 (324.0MB)** | 0.0154 (1, 169.2MB) | JRuby 10 |
| dup | 0.0156 (3, 208.9MB) | **0.0075 (415.0MB)** | 0.0149 (1, 109.0MB) | JRuby 10 |
| merge({}) | 0.0227 (9, 217.6MB) | **0.0078 (405.5MB)** | 0.0152 (1, 153.2MB) | JRuby 10 |
| to_h | 0.0048\* (209.7MB) | **0.0020\* (413.5MB)** | 0.0052\* (173.3MB) | JRuby 10 |

> **All agree**: to_h

### Method Invocation

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| __send__ | 0.0326 (191.2MB) | **0.0270 (396.0MB)** | 0.0297 (141.3MB) | JRuby 10 |
| direct | 0.0207\* (203.7MB) | **0.0084\* (417.5MB)** | 0.0220\* (1, 113.4MB) | JRuby 10 |
| method.call | 0.0426 (193.2MB) | **0.0118 (304.0MB)** | 0.0224 (178.4MB) | JRuby 10 |
| public_send | 0.0463 (195.8MB) | **0.0301 (304.0MB)** | 0.0321 (1, 109.2MB) | JRuby 10 |
| send | 0.0323 (199.2MB) | **0.0262 (144.0MB)** | 0.0300 (180.3MB) | JRuby 10 |

> **All agree**: direct

### Block/Yield

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| block.call | 0.0892 (188.5MB) | **0.0388 (412.0MB)** | 0.1198 (2, 161.6MB) | JRuby 10 |
| each { } | 0.0132\* (186.2MB) | **0.0093 (484.0MB)** | 0.0179\* (203.5MB) | JRuby 10 |
| lambda.call | 0.0893 (186.5MB) | **0.0602 (416.0MB)** | 0.1382 (2, 192.8MB) | JRuby 10 |
| map { } | 0.0149 (159.6MB) | **0.0091\* (564.0MB)** | 0.0190 (224.5MB) | JRuby 10 |
| nested yield | 0.1158 (187.7MB) | **0.0409 (412.0MB)** | 0.1470 (3, 208.2MB) | JRuby 10 |
| no block baseline | 0.0681 (161.0MB) | **0.0145 (601.2MB)** | 0.0668 (1, 140.5MB) | JRuby 10 |
| proc.call | 0.0889 (187.0MB) | **0.0492 (412.0MB)** | 0.1226 (2, 197.2MB) | JRuby 10 |
| select { } | 0.0171 (161.3MB) | **0.0099 (644.0MB)** | 0.0238 (1, 89.1MB) | JRuby 10 |
| unused closure (&block) | 0.1151 (161.1MB) | **0.0647 (1, 321.2MB)** | 0.2199 (8, 90.8MB) | JRuby 10 |
| unused closure (yield) | 0.0853 (161.0MB) | **0.0654 (1, 597.2MB)** | 0.1189 (5, 104.2MB) | JRuby 10 |
| yield | 0.0847 (189.7MB) | **0.0283 (412.0MB)** | 0.0965 (2, 196.0MB) | JRuby 10 |

> **MRI**: each { } | **JRuby 10**: map { } | **JRuby 1.7**: each { }

### Eval

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| binding.eval | 0.1774 (18, 106.6MB) | 0.4951 (5, 165.6MB) | **0.0349 (4, 165.1MB)** | JRuby 1.7 |
| class_eval blk | 0.0046 (3, 167.6MB) | **0.0045 (613.5MB)** | 0.0154 (1, 118.2MB) | JRuby 10 |
| class_eval str | 0.2012 (18, 168.1MB) | 0.3675 (4, 525.5MB) | **0.0532 (4, 205.0MB)** | JRuby 1.7 |
| direct (baseline) | 0.0017\* (106.3MB) | **0.0008\* (169.6MB)** | 0.0014\* (171.8MB) | JRuby 10 |
| eval simple | 0.2010 (18, 166.0MB) | 0.3526 (4, 357.3MB) | **0.0365 (3, 220.6MB)** | JRuby 1.7 |
| eval vars | 0.2307 (18, 167.6MB) | 0.4069 (5, 365.3MB) | **0.0821 (4, 251.6MB)** | JRuby 1.7 |
| instance_eval blk | **0.0046 (3, 167.1MB)** | 0.0047 (189.4MB) | 0.0119 (1, 101.4MB) | MRI |
| instance_eval str | 0.2013 (18, 167.6MB) | 0.3646 (5, 105.4MB) | **0.0541 (4, 188.2MB)** | JRuby 1.7 |

> **All agree**: direct (baseline)

### Caller

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| caller() | **0.4075 (724, 106.6MB)** | 2.3655 (7, 209.7MB) | 4.4727\* (19, 155.2MB) | MRI |
| caller(0) | **0.4715 (833, 106.7MB)** | 2.3960 (7, 613.7MB) | 4.4752 (20, 101.8MB) | MRI |
| caller(0, 1) | **0.0708 (108, 107.0MB)** | 0.4756 (2, 645.7MB) | - | MRI |
| caller(0, 5) | **0.2654 (470, 107.0MB)** | 2.7858 (8, 353.7MB) | - | MRI |
| caller_locations(0, 1) | **0.0187\* (54, 107.3MB)** | 0.4680\* (1, 629.7MB) | - | MRI |
| caller_locations(0, 5) | **0.0453 (330, 107.4MB)** | 2.6601 (8, 117.8MB) | - | MRI |

> **MRI**: caller_locations(0, 1) | **JRuby 10**: caller_locations(0, 1) | **JRuby 1.7**: caller()

### Marshal

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| dump only medium 1k | **0.0253 (163.7MB)** | 0.0388 (253.9MB) | 0.0420 (1, 105.4MB) | MRI |
| dump/load medium 1k | **0.0541 (2, 147.9MB)** | 0.1257 (649.8MB) | 0.0714 (2, 185.3MB) | MRI |
| dump/load small 1k | **0.0022\* (1, 107.6MB)** | 0.0050\* (133.8MB) | 0.0035\* (120.2MB) | MRI |
| load only medium 1k | 0.0288 (1, 166.8MB) | 0.0866 (569.9MB) | **0.0253 (249.0MB)** | JRuby 1.7 |

> **All agree**: dump/load small 1k

### Memoization

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| fetch block 100k | **0.0057 (166.2MB)** | 0.0077 (1, 126.0MB) | 0.0120 (1, 88.6MB) | MRI |
| ivar \|\|= 100k | 0.0053\* (165.8MB) | **0.0016\* (166.0MB)** | 0.0069\* (162.0MB) | JRuby 10 |
| key? + []= 100k | 0.0066 (166.0MB) | **0.0054 (162.0MB)** | 0.0136 (145.4MB) | JRuby 10 |
| \|\|= hash key 100k | 0.0069 (166.4MB) | **0.0047 (605.9MB)** | 0.0094 (135.4MB) | JRuby 10 |

> **All agree**: ivar \|\|= 100k

### Set vs Array

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Array#include? 10 100k | 0.0049 (165.7MB) | **0.0030 (170.0MB)** | 0.0044 (175.4MB) | JRuby 10 |
| Array#include? 1k 10k | 0.0188 (168.2MB) | 0.0151 (538.0MB) | **0.0056 (131.9MB)** | JRuby 1.7 |
| Set reuse 10 100k | 0.0049 (168.2MB) | **0.0015\* (538.0MB)** | 0.0058 (131.9MB) | JRuby 10 |
| Set reuse 1k 10k | **0.0006\* (257.3MB)** | 0.0015 (586.2MB) | 0.0007\* (189.3MB) | MRI |
| Set.new+incl 10 100k | 0.1610 (36, 168.3MB) | **0.0175 (534.0MB)** | 0.1711 (3, 118.7MB) | JRuby 10 |
| Set.new+incl 1k 10k | 0.9219 (17, 257.4MB) | **0.2967 (2, 586.2MB)** | 0.6046 (16, 189.3MB) | JRuby 10 |

> **MRI**: Set reuse 1k 10k | **JRuby 10**: Set reuse 10 100k | **JRuby 1.7**: Set reuse 1k 10k

### Mutex

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| lock/unlock 100k | 0.0085 (257.3MB) | **0.0044 (134.3MB)** | 0.0090 (209.3MB) | JRuby 10 |
| no sync 100k | 0.0040\* (257.3MB) | **0.0015\* (610.2MB)** | 0.0037\* (226.0MB) | JRuby 10 |
| synchronize 100k | 0.0112 (257.3MB) | **0.0079 (1, 110.3MB)** | 0.0121 (175.9MB) | JRuby 10 |
| try_lock 100k | 0.0071 (257.3MB) | **0.0041 (158.3MB)** | 0.0095 (246.1MB) | JRuby 10 |

> **All agree**: no sync 100k

### Thread-local

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| current[] read 100k | 0.0051 (257.3MB) | **0.0022 (158.3MB)** | 0.0046 (95.8MB) | JRuby 10 |
| current[] write 100k | 0.0059 (257.3MB) | **0.0025 (158.3MB)** | 0.0074 (132.6MB) | JRuby 10 |
| ivar read 100k | 0.0042 (257.3MB) | **0.0016 (162.3MB)** | 0.0042 (145.9MB) | JRuby 10 |
| local var 100k | 0.0029\* (257.3MB) | **0.0010\* (162.3MB)** | 0.0027\* (159.3MB) | JRuby 10 |

> **All agree**: local var 100k

### Data Structures

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| Class create 10k | **0.0024 (5, 257.6MB)** | 0.0062 (222.3MB) | 0.0034 (1, 92.6MB) | MRI |
| Class read 100k | 0.0032 (257.5MB) | **0.0014 (226.3MB)** | 0.0035 (135.8MB) | JRuby 10 |
| Class write 100k | 0.0120 (13, 257.5MB) | **0.0046 (538.3MB)** | 0.0110 (1, 196.0MB) | JRuby 10 |
| Hash create 10k | **0.0017\* (3, 257.5MB)** | 0.0025 (186.3MB) | 0.0018\* (199.4MB) | MRI |
| Hash read 100k | 0.0034 (257.5MB) | **0.0020 (222.3MB)** | 0.0042 (109.2MB) | JRuby 10 |
| Hash write 100k | 0.0135 (13, 257.5MB) | **0.0094 (330.3MB)** | 0.0240 (209.2MB) | JRuby 10 |
| Struct create 10k | **0.0020 (2, 257.5MB)** | 0.0039 (202.3MB) | 0.0026 (229.4MB) | MRI |
| Struct read 100k | 0.0031 (257.5MB) | **0.0012\* (222.3MB)** | 0.0034 (122.5MB) | JRuby 10 |
| Struct write 100k | 0.0120 (13, 257.5MB) | **0.0079 (434.3MB)** | 0.0235 (1, 119.2MB) | JRuby 10 |

> **MRI**: Hash create 10k | **JRuby 10**: Struct read 100k | **JRuby 1.7**: Hash create 10k

### YAML

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| dump only medium 1k | 0.6128 (230, 272.5MB) | **0.4233 (3, 383.6MB)** | 0.9090 (21, 155.1MB) | JRuby 10 |
| dump/load medium 500 | 1.0045 (249, 272.5MB) | **0.8969 (8, 215.8MB)** | 1.2049 (34, 231.5MB) | JRuby 10 |
| dump/load small 1k | **0.0799\* (13, 272.2MB)** | 0.1880\* (586.9MB) | 0.0799\* (2, 166.2MB) | MRI |
| load only medium 1k | 1.3850 (250, 272.5MB) | **1.3376 (13, 535.8MB)** | 1.4895 (48, 256.1MB) | JRuby 10 |

> **All agree**: dump/load small 1k

### Lazy Evaluation

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| find (eager) | 0.1835 (272.5MB) | **0.0730 (628.2MB)** | - | JRuby 10 |
| lazy.find | **0.1842 (272.5MB)** | 0.1933 (1, 228.3MB) | - | MRI |
| lazy.map.first 10 | **0.0031\* (2, 338.2MB)** | 0.0171\* (384.1MB) | - | MRI |
| lazy.select.first | **0.3720 (371, 313.9MB)** | 0.7909 (16, 355.8MB) | - | MRI |
| map.first 10 (eager) | 0.2991 (5, 338.1MB) | **0.2007 (5, 328.1MB)** | - | JRuby 10 |
| select.first (eager) | 0.2872 (6, 313.9MB) | **0.1779 (1, 640.4MB)** | - | JRuby 10 |

> **All agree**: lazy.map.first 10

### Grouping

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| dual select 100 | 0.0625 (1, 369.0MB) | **0.0543 (332.8MB)** | 0.0885 (2, 185.8MB) | JRuby 10 |
| each_with_object 100 | **0.1114 (1, 368.9MB)** | 0.1272 (176.4MB) | 0.1767 (3, 125.9MB) | MRI |
| group_by block 100 | **0.0806 (1, 368.7MB)** | 0.1310 (352.2MB) | 0.1332 (2, 152.0MB) | MRI |
| inject grouping 100 | **0.1169 (1, 368.9MB)** | 0.1412 (432.7MB) | 0.1880 (2, 258.0MB) | MRI |
| partition 2 groups 100 | **0.0444\* (1, 368.9MB)** | 0.0479\* (408.6MB) | 0.0540\* (2, 156.1MB) | MRI |

> **All agree**: partition 2 groups 100

### Metaprogramming

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| def method call 100k | **0.0037\* (369.0MB)** | 0.0061 (336.8MB) | 0.0041 (199.8MB) | MRI |
| define_method call 100k | **0.0041 (369.0MB)** | 0.0047 (416.8MB) | 0.0090 (1, 149.2MB) | MRI |
| ivar_get 100k | 0.0043 (369.0MB) | **0.0017 (52.8MB)** | 0.0044 (205.1MB) | JRuby 10 |
| ivar_set 100k | 0.0045 (369.0MB) | **0.0021 (64.8MB)** | 0.0053 (218.3MB) | JRuby 10 |
| method().call 100k | 0.0072 (369.0MB) | **0.0017\* (52.8MB)** | 0.0041\* (192.0MB) | JRuby 10 |
| respond_to?+send 100k | 0.0084 (369.0MB) | 0.0086 (48.8MB) | **0.0076 (175.5MB)** | JRuby 1.7 |
| send 100k | 0.0060 (369.0MB) | **0.0043 (436.8MB)** | 0.0050 (162.3MB) | JRuby 10 |

> **MRI**: def method call 100k | **JRuby 10**: method().call 100k | **JRuby 1.7**: method().call 100k

### Exceptions

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| begin/rescue none 100k | **0.0039 (369.0MB)** | 0.0110 (68.8MB) | 0.0067 (254.5MB) | MRI |
| nested throw/catch 10k | **0.0022 (375.0MB)** | 0.0165 (420.5MB) | 0.0201 (238.4MB) | MRI |
| no exception 100k | 0.0034 (369.0MB) | 0.0090 (68.8MB) | **0.0028\* (231.5MB)** | JRuby 1.7 |
| raise/rescue 10k | **0.0045 (1, 375.0MB)** | 0.0079\* (80.8MB) | 0.5010 (1, 225.1MB) | MRI |
| raise/rescue msg 10k | **0.0052 (1, 375.0MB)** | 0.2479 (1, 376.5MB) | 0.5036 (1, 198.8MB) | MRI |
| throw/catch 10k | **0.0014\* (375.0MB)** | 0.0114 (392.5MB) | 0.0109 (215.3MB) | MRI |

> **MRI**: throw/catch 10k | **JRuby 10**: raise/rescue 10k | **JRuby 1.7**: no exception 100k

### String Freeze

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| -"" dedup 100k | **0.0029 (375.0MB)** | 0.0030 (424.5MB) | - | MRI |
| .freeze 100k | **0.0029 (375.0MB)** | 0.0030\* (424.5MB) | 0.0033\* (146.0MB) | MRI |
| dup 100k | 0.0054 (7, 375.0MB) | 0.0162 (1, 40.6MB) | **0.0036 (182.3MB)** | JRuby 1.7 |
| interpolate 100k | 0.0079 (7, 375.0MB) | **0.0034 (112.6MB)** | 0.0233 (1, 155.9MB) | JRuby 10 |
| interpolate.freeze 100k | 0.0100 (7, 375.0MB) | **0.0036 (180.6MB)** | 0.0306 (1, 126.2MB) | JRuby 10 |
| literal 100k | **0.0029\* (375.0MB)** | 0.0030 (424.5MB) | 0.0035 (1, 109.8MB) | MRI |

> **MRI**: literal 100k | **JRuby 10**: .freeze 100k | **JRuby 1.7**: .freeze 100k

### Split Patterns

| Technique | MRI | JRuby 10 | JRuby 1.7 | Winner |
|:----------|----------:|----------:|----------:|:------:|
| each_line 10k | 0.0089 (8, 375.5MB) | 0.0142 (1, 68.7MB) | **0.0056 (246.0MB)** | JRuby 1.7 |
| lines method 10k | 0.0063 (8, 375.5MB) | 0.0057 (120.7MB) | **0.0026 (259.3MB)** | JRuby 1.7 |
| scan pattern 10k | 0.0276 (63, 375.6MB) | 0.0195 (360.7MB) | **0.0180 (206.2MB)** | JRuby 1.7 |
| split limit -1 10k | 0.0066 (8, 375.5MB) | 0.0053 (308.6MB) | **0.0037 (1, 99.9MB)** | JRuby 1.7 |
| split limit 3 10k | 0.0023\* (2, 375.5MB) | 0.0031\* (256.6MB) | **0.0016\* (208.7MB)** | JRuby 1.7 |
| split newline 10k | 0.0066 (8, 375.5MB) | 0.0039 (360.6MB) | **0.0023 (156.3MB)** | JRuby 1.7 |
| split no limit 10k | 0.0066 (8, 375.5MB) | 0.0056 (232.6MB) | **0.0040 (185.6MB)** | JRuby 1.7 |

> **All agree**: split limit 3 10k

## Operation Benchmarks

Format: **time** (gc collections, heap MB)

| Benchmark | MRI | JRuby 10 | JRuby 1.7 | Winner | Factor |
|:----------|----------:|----------:|----------:|:------:|-------:|
| Array creation (Array.new) | 0.2933 (5, 506.8MB) | **0.2504 (4, 173.2MB)** | 0.4136 (15, 250.2MB) | JRuby 10 | 1.7x |
| Array creation (literal) | **0.0045 (7, 434.5MB)** | 0.0057 (269.0MB) | 0.0074 (263.0MB) | MRI | 1.6x |
| Array#compact | 0.0382 (1, 542.4MB) | **0.0340 (1, 225.5MB)** | 0.0573 (1, 291.8MB) | JRuby 10 | 1.7x |
| Array#each | 0.0318 (529.8MB) | **0.0306 (416.3MB)** | 0.0567 (1, 263.6MB) | JRuby 10 | 1.9x |
| Array#flatten | 0.0336 (3, 544.9MB) | **0.0222 (301.6MB)** | 0.0359 (1, 161.5MB) | JRuby 10 | 1.6x |
| Array#include? | 0.2490 (544.7MB) | 0.2306 (409.5MB) | **0.1029 (155.8MB)** | JRuby 1.7 | 2.4x |
| Array#index | 0.2733 (544.2MB) | 0.3032 (417.5MB) | **0.1367 (168.4MB)** | JRuby 1.7 | 2.2x |
| Array#map | **0.0151 (529.8MB)** | 0.0153 (1, 200.9MB) | 0.0247 (1, 247.5MB) | MRI | 1.6x |
| Array#push (append) | 0.0203 (529.8MB) | **0.0106 (409.2MB)** | 0.1011 (2, 167.6MB) | JRuby 10 | 9.5x |
| Array#reduce | **0.0392 (529.8MB)** | 0.0504 (624.4MB) | 0.0787 (3, 277.8MB) | MRI | 2.0x |
| Array#select | 0.0154 (529.8MB) | **0.0116 (284.9MB)** | 0.0222 (269.2MB) | JRuby 10 | 1.9x |
| Array#sort | **0.0243 (529.8MB)** | 0.0427 (1, 210.5MB) | 0.0315 (184.1MB) | MRI | 1.8x |
| Array#sort_by | **0.0602 (15, 537.3MB)** | 0.0980 (654.5MB) | 0.1007 (2, 253.7MB) | MRI | 1.7x |
| Array#uniq | 0.0446 (1, 545.2MB) | **0.0388 (405.5MB)** | 0.0508 (1, 146.4MB) | JRuby 10 | 1.3x |
| Array#unshift (prepend) | **0.0004 (529.8MB)** | 0.0049 (413.2MB) | 0.0054 (173.9MB) | MRI | 12.1x |
| CSV.generate | 0.0937 (109, 746.0MB) | **0.0507 (1, 159.7MB)** | 0.1035 (4, 339.0MB) | JRuby 10 | 2.0x |
| CSV.parse | 0.1045 (93, 746.0MB) | **0.0472 (1, 175.9MB)** | 0.1284 (4, 280.1MB) | JRuby 10 | 2.7x |
| Date.parse | 0.0196 (5, 746.5MB) | **0.0195 (1, 272.3MB)** | 0.1327 (2, 428.4MB) | JRuby 10 | 6.8x |
| Deep hash tree creation | **0.0113 (18, 705.6MB)** | 0.0125 (313.5MB) | 0.0133 (358.1MB) | MRI | 1.2x |
| Float() parsing | **0.0075 (746.0MB)** | 0.0173 (443.7MB) | 0.0289 (1, 385.7MB) | MRI | 3.9x |
| Frozen string literals | 0.0035 (434.5MB) | **0.0016 (241.0MB)** | 0.0047 (190.4MB) | JRuby 10 | 3.0x |
| Hash creation (from array) | 0.2359 (220, 539.5MB) | **0.1751 (2, 285.6MB)** | 0.3801 (10, 163.2MB) | JRuby 10 | 2.2x |
| Hash creation (literal) | 0.0181 (58, 539.5MB) | **0.0127 (1, 305.6MB)** | 0.0200 (1, 187.3MB) | JRuby 10 | 1.6x |
| Hash map keys | **0.1739 (69, 705.2MB)** | 0.2554 (3, 771.9MB) | 0.2414 (6, 258.4MB) | MRI | 1.5x |
| Hash map values | **0.0807 (3, 705.2MB)** | 0.1401 (1, 563.9MB) | 0.2329 (5, 271.4MB) | MRI | 2.9x |
| Hash#[] (read) | **0.1507 (539.5MB)** | 0.1552 (513.6MB) | 0.1846 (2, 177.9MB) | MRI | 1.2x |
| Hash#[]= (write) | **0.1264 (4, 656.4MB)** | 0.7486 (1, 538.2MB) | 0.6052 (9, 147.1MB) | MRI | 5.9x |
| Hash#[]= 10k int keys x50 | **0.0334 (1, 676.7MB)** | 0.0506 (983.8MB) | 0.0344 (1, 288.6MB) | MRI | 1.5x |
| Hash#[]= 500k frozen string keys | **0.0620 (1, 676.8MB)** | 0.3576 (1, 643.8MB) | 0.5037 (5, 219.6MB) | MRI | 8.1x |
| Hash#[]= 500k int keys | **0.0389 (1, 637.8MB)** | 0.3105 (3, 469.0MB) | 0.0395 (4, 186.9MB) | MRI | 8.0x |
| Hash#[]= 500k string keys | **0.1735 (8, 673.4MB)** | 0.8392 (4, 703.0MB) | 0.7887 (10, 241.4MB) | MRI | 4.8x |
| Hash#[]= 500k symbol keys | **0.4042 (9, 718.0MB)** | 0.8710 (2, 884.2MB) | 0.7482 (12, 219.6MB) | MRI | 2.2x |
| Hash#each | **0.0876 (669.5MB)** | 0.1260 (1, 1340.1MB) | 0.2983 (10, 193.0MB) | MRI | 3.4x |
| Hash#keys 500k | **0.0335 (33, 705.0MB)** | 0.9382 (1, 1141.6MB) | 0.4107 (8, 264.6MB) | MRI | 28.0x |
| Hash#keys and Hash#values | **0.0157 (13, 672.6MB)** | 0.4214 (1007.9MB) | 0.8894 (1, 324.5MB) | MRI | 56.6x |
| Hash#merge | **0.2428 (41, 705.1MB)** | 0.5168 (1, 1282.1MB) | 1.0769 (16, 321.7MB) | MRI | 4.4x |
| Hash#select | **0.1038 (9, 708.8MB)** | 0.3025 (1, 559.5MB) | 0.3422 (7, 299.1MB) | MRI | 3.3x |
| Hash#to_a | 0.1592 (99, 713.3MB) | **0.0616 (2, 217.5MB)** | 0.0917 (8, 359.1MB) | JRuby 10 | 2.6x |
| Integer() parsing | **0.0058 (746.0MB)** | 0.0067 (235.7MB) | 0.0083 (430.3MB) | MRI | 1.4x |
| JSON.generate | **0.0352 (1, 745.5MB)** | 0.0907 (491.6MB) | 0.1213 (4, 391.3MB) | MRI | 3.4x |
| JSON.parse | **0.0604 (67, 705.9MB)** | 0.2948 (4, 379.7MB) | 0.2401 (5, 415.5MB) | MRI | 4.9x |
| Java HashMap 500k int keys | - | **0.0394 (2, 1137.0MB)** | 0.0594 (3, 250.9MB) | JRuby 10 | 1.5x |
| Line-by-line parsing | 0.0401 (43, 748.8MB) | **0.0169 (1, 188.4MB)** | 0.0231 (1, 429.8MB) | JRuby 10 | 2.4x |
| Nested hash access | 0.2671 (706.6MB) | **0.2449 (735.5MB)** | 0.3009 (2, 286.0MB) | JRuby 10 | 1.2x |
| Regex extraction | **0.0071 (18, 746.6MB)** | 0.0100 (320.3MB) | 0.0072 (320.5MB) | MRI | 1.4x |
| String encoding conversion | 0.0638 (1, 434.5MB) | 0.1374 (233.0MB) | **0.0317 (2, 146.1MB)** | JRuby 1.7 | 4.3x |
| String#gsub (regex) | 0.5379 (1592, 375.6MB) | 0.2675 (1, 108.8MB) | **0.2438 (8, 158.4MB)** | JRuby 1.7 | 2.2x |
| String#match | **0.0325 (57, 375.7MB)** | 0.0428 (437.0MB) | 0.0499 (1, 152.6MB) | MRI | 1.5x |
| String#scan (regex) | 0.3647 (868, 375.7MB) | 0.1662 (4, 185.0MB) | **0.1604 (4, 155.9MB)** | JRuby 1.7 | 2.3x |
| String#split | 0.1148 (187, 375.6MB) | 0.0616 (2, 128.9MB) | **0.0535 (4, 199.9MB)** | JRuby 1.7 | 2.1x |
| Tokenization (scan) | 0.0248 (56, 746.6MB) | 0.0186 (1, 212.6MB) | **0.0163 (402.2MB)** | JRuby 1.7 | 1.5x |

## Summary

### Technique Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 69 |
| JRuby 10 | 94 |
| JRuby 1.7 | 22 |

### Operation Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 27 |
| JRuby 10 | 17 |
| JRuby 1.7 | 7 |

### Overall

| Ruby | Total Wins |
|:-----|----------:|
| JRuby 10 | 111 |
| MRI | 96 |
| JRuby 1.7 | 29 |

## Recommendations

Best technique to use for each category:

| Category | Recommendation |
|:---------|:---------------|
| String Building | MRI: `Array#join`, JRuby 10: `Array#join`, JRuby 1.7: `inject <<` |
| Array Iteration | MRI: `reduce(:+)`, JRuby 10: `sum`, JRuby 1.7: `reduce(:+)` |
| Array Building | `Range#to_a` |
| Array Sorting | `sort!` |
| Hash Building | MRI: `zip.to_h`, JRuby 10: `Hash[]`, JRuby 1.7: `Hash[]` |
| Hash Access | MRI: `[] existing`, JRuby 10: `fetch existing`, JRuby 1.7: `fetch default` |
| Hash Key Iteration | `keys.map` |
| Conditionals | MRI: `array lookup`, JRuby 10: `if/elsif`, JRuby 1.7: `array lookup` |
| Loops | MRI: `while`, JRuby 10: `times`, JRuby 1.7: `while` |
| String Search | `start_with?` |
| Filtering | MRI: `reject`, JRuby 10: `reject`, JRuby 1.7: `select &:even?` |
| Transform | MRI: `collect`, JRuby 10: `map`, JRuby 1.7: `collect` |
| Number Conversion | `map(&:to_i)` |
| Nil Handling | MRI: `compact.sum`, JRuby 10: `compact.sum`, JRuby 1.7: `\|\| default` |
| Object Duplication | `to_h` |
| Method Invocation | `direct` |
| Block/Yield | MRI: `each { }`, JRuby 10: `map { }`, JRuby 1.7: `each { }` |
| Eval | `direct (baseline)` |
| Caller | MRI: `caller_locations(0, 1)`, JRuby 10: `caller_locations(0, 1)`, JRuby 1.7: `caller()` |
| Marshal | `dump/load small 1k` |
| Memoization | `ivar \|\|= 100k` |
| Set vs Array | MRI: `Set reuse 1k 10k`, JRuby 10: `Set reuse 10 100k`, JRuby 1.7: `Set reuse 1k 10k` |
| Mutex | `no sync 100k` |
| Thread-local | `local var 100k` |
| Data Structures | MRI: `Hash create 10k`, JRuby 10: `Struct read 100k`, JRuby 1.7: `Hash create 10k` |
| YAML | `dump/load small 1k` |
| Lazy Evaluation | `lazy.map.first 10` |
| Grouping | `partition 2 groups 100` |
| Metaprogramming | MRI: `def method call 100k`, JRuby 10: `method().call 100k`, JRuby 1.7: `method().call 100k` |
| Exceptions | MRI: `throw/catch 10k`, JRuby 10: `raise/rescue 10k`, JRuby 1.7: `no exception 100k` |
| String Freeze | MRI: `literal 100k`, JRuby 10: `.freeze 100k`, JRuby 1.7: `.freeze 100k` |
| Split Patterns | `split limit 3 10k` |
