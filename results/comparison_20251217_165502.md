# Ruby Benchmark Comparison

_Generated: 2025-12-17 16:55:02_

## Versions Compared

- **MRI**: `ruby 3.4.7p58`
- **JRuby 10**: `JRuby 10.0.2.0 (3.4.2) [21.0.9]`
- **JRuby 1.7**: `JRuby 1.7.27 (1.9.3) [1.8.0_472]`
- **TruffleRuby**: `truffleruby 3.3.7p0`

## Technique Comparisons

Format: **time** (gc, heap MB) | \* = best for that Ruby

### String Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| + operator | 0.0014 (2, 51.6MB) | 0.0022 (1, 51.8MB) | 0.0034 (128.0MB) | **0.0002 (610.0MB)** | TruffleRuby |
| << shovel | **0.0001 (51.6MB)** | 0.0004 (55.8MB) | 0.0004 (128.0MB) | 0.0002 (611.6MB) | MRI |
| Array#join | **0.0000\* (51.7MB)** | 0.0003 (55.8MB) | 0.0003 (130.5MB) | 0.0001 (613.5MB) | MRI |
| StringIO | **0.0002 (51.7MB)** | 0.0006 (55.8MB) | 0.0003 (130.5MB) | 0.0004 (629.6MB) | MRI |
| concat | 0.0001 (51.7MB) | 0.0002\* (55.8MB) | 0.0003 (130.5MB) | **0.0001 (612.2MB)** | TruffleRuby |
| each_with_object | 0.0001 (51.7MB) | 0.0004 (59.8MB) | 0.0004 (133.0MB) | **0.0001 (649.8MB)** | TruffleRuby |
| inject << | 0.0001 (51.7MB) | 0.0004 (59.8MB) | 0.0002\* (16.1MB) | **0.0001 (673.4MB)** | TruffleRuby |
| interpolation | 0.0021 (1, 52.1MB) | 0.0027 (1, 48.1MB) | 0.0021 (1, 17.2MB) | **0.0001\* (626.7MB)** | TruffleRuby |

> **MRI**: Array#join | **JRuby 10**: concat | **JRuby 1.7**: inject << | **TruffleRuby**: interpolation

### Array Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each + var | 0.0269 (61.3MB) | 0.0152 (1, 209.3MB) | 0.0439 (2, 169.9MB) | **0.0004 (734.2MB)** | TruffleRuby |
| for in | 0.0300 (61.3MB) | 0.0140 (299.8MB) | 0.0301 (1, 126.7MB) | **0.0003\* (742.2MB)** | TruffleRuby |
| reduce block | 0.0322 (61.3MB) | 0.0255 (1, 212.3MB) | 0.0678 (5, 151.7MB) | **0.0004 (692.7MB)** | TruffleRuby |
| reduce(:+) | 0.0009\* (61.3MB) | 0.0197 (1, 85.3MB) | 0.0222\* (2, 90.3MB) | **0.0004 (726.3MB)** | TruffleRuby |
| sum | 0.0012 (61.3MB) | 0.0012\* (112.1MB) | - | **0.0004 (687.5MB)** | TruffleRuby |
| while index | 0.0279 (61.3MB) | 0.1182 (1, 300.1MB) | 0.0747 (2, 149.8MB) | **0.0031 (768.9MB)** | TruffleRuby |

> **MRI**: reduce(:+) | **JRuby 10**: sum | **JRuby 1.7**: reduce(:+) | **TruffleRuby**: for in

### Array Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| << in times | 0.0029 (66.2MB) | 0.0019 (1, 92.1MB) | 0.0042 (1, 76.0MB) | **0.0001 (765.3MB)** | TruffleRuby |
| Array.new block | 0.0024 (64.8MB) | 0.0018 (367.8MB) | 0.0035 (1, 82.2MB) | **0.0010 (763.4MB)** | TruffleRuby |
| Range#map | 0.0031 (66.0MB) | 0.0020 (415.8MB) | 0.0032 (146.1MB) | **0.0009 (747.3MB)** | TruffleRuby |
| Range#to_a | 0.0011\* (62.5MB) | 0.0013\* (331.8MB) | 0.0004\* (151.1MB) | **0.0000\* (755.7MB)** | TruffleRuby |
| each_with_object | 0.0037 (67.9MB) | 0.0031 (184.1MB) | 0.0110 (135.3MB) | **0.0023 (715.7MB)** | TruffleRuby |
| push in times | 0.0033 (66.4MB) | **0.0015 (136.1MB)** | 0.0068 (152.7MB) | 0.0019 (764.8MB) | JRuby 10 |

> **All agree**: Range#to_a

### Array Sorting

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| sort | 0.0078 (68.0MB) | 0.0243 (204.1MB) | 0.0107 (173.4MB) | **0.0035\* (730.4MB)** | TruffleRuby |
| sort block | 0.0315 (68.2MB) | 0.0287 (1, 214.7MB) | 0.0505 (2, 167.3MB) | **0.0055 (760.6MB)** | TruffleRuby |
| sort! | 0.0076\* (68.2MB) | 0.0141\* (228.1MB) | 0.0086\* (1, 75.6MB) | **0.0036 (734.9MB)** | TruffleRuby |
| sort_by | 0.0077 (68.4MB) | 0.0179 (254.7MB) | 0.0248 (1, 86.9MB) | **0.0071 (770.4MB)** | TruffleRuby |
| sort_by(&:itself) | **0.0078 (68.4MB)** | 0.0185 (314.7MB) | - | 0.0095 (813.6MB) | MRI |

> **MRI**: sort! | **JRuby 10**: sort! | **JRuby 1.7**: sort! | **TruffleRuby**: sort

### Hash Building

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Hash[] | 0.0072 (1, 93.9MB) | 0.0103 (229.6MB) | 0.0058\* (210.3MB) | **0.0053 (793.6MB)** | TruffleRuby |
| []= loop | 0.0068 (76.0MB) | 0.0143 (370.7MB) | 0.0109 (186.0MB) | **0.0034 (832.4MB)** | TruffleRuby |
| each_with_object | 0.0083 (94.7MB) | 0.0253 (1, 121.6MB) | 0.0145 (174.7MB) | **0.0026\* (836.5MB)** | TruffleRuby |
| map.to_h | 0.0086 (1, 94.4MB) | 0.0129 (193.6MB) | - | **0.0032 (823.5MB)** | TruffleRuby |
| zip.to_h | 0.0052\* (1, 84.1MB) | 0.0098\* (406.7MB) | - | **0.0027 (820.7MB)** | TruffleRuby |

> **MRI**: zip.to_h | **JRuby 10**: zip.to_h | **JRuby 1.7**: Hash[] | **TruffleRuby**: each_with_object

### Hash Access

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| [] existing | 0.0309\* (154.0MB) | 0.0479 (1, 235.6MB) | 0.0497 (2, 181.8MB) | **0.0121 (1006.8MB)** | TruffleRuby |
| [] missing | 0.0361 (165.5MB) | 0.0405 (395.6MB) | 0.0493 (2, 188.9MB) | **0.0085 (1032.7MB)** | TruffleRuby |
| dig | 0.0321 (165.5MB) | 0.0359 (399.6MB) | - | **0.0121 (1084.9MB)** | TruffleRuby |
| fetch default | 0.0395 (165.5MB) | 0.0369 (1, 235.6MB) | 0.0472\* (2, 193.4MB) | **0.0099 (1030.1MB)** | TruffleRuby |
| fetch existing | 0.0327 (165.5MB) | 0.0349\* (315.6MB) | 0.0713 (2, 185.3MB) | **0.0120 (1012.6MB)** | TruffleRuby |
| \|\| default | 0.0387 (165.5MB) | 0.0420 (319.6MB) | 0.0494 (2, 196.6MB) | **0.0077\* (1038.4MB)** | TruffleRuby |

> **MRI**: [] existing | **JRuby 10**: fetch existing | **JRuby 1.7**: fetch default | **TruffleRuby**: \|\| default

### Hash Key Iteration

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each { \|k,_\| } | 1.3308 (166, 103.3MB) | 0.9516 (18, 530.6MB) | 2.0448 (87, 258.9MB) | **0.5169 (18, 1191.6MB)** | TruffleRuby |
| each_key.map | 1.4510 (176, 144.3MB) | 1.6350 (21, 533.9MB) | 1.3974 (70, 297.1MB) | **0.5225 (16, 1364.0MB)** | TruffleRuby |
| keys.each | 1.2855 (166, 122.4MB) | 1.2537 (19, 541.9MB) | 1.4554 (63, 270.4MB) | **0.5899 (20, 1179.2MB)** | TruffleRuby |
| keys.map | 1.2554\* (157, 148.3MB) | 0.7705\* (20, 523.5MB) | 1.3773\* (60, 206.4MB) | **0.5579 (19, 1292.5MB)** | TruffleRuby |
| map { \|k,_\| } | 1.4861 (176, 144.3MB) | 0.9768 (29, 430.8MB) | 2.0471 (95, 346.3MB) | **0.4973\* (17, 1285.5MB)** | TruffleRuby |

> **MRI**: keys.map | **JRuby 10**: keys.map | **JRuby 1.7**: keys.map | **TruffleRuby**: map { \|k,_\| }

### Conditionals

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| array lookup | 0.0256\* (143.3MB) | 0.0272 (4, 94.1MB) | 0.0460 (2, 179.2MB) | **0.0035\* (779.3MB)** | TruffleRuby |
| case/when | 0.1060 (143.3MB) | 0.0449 (606.1MB) | 0.1144 (2, 337.7MB) | **0.0119 (775.7MB)** | TruffleRuby |
| hash lookup | 0.0376 (143.3MB) | 0.0442 (1, 342.1MB) | 0.0453\* (1, 362.4MB) | **0.0127 (778.3MB)** | TruffleRuby |
| if/elsif | 0.0374 (143.8MB) | 0.0190\* (442.1MB) | 0.0493 (1, 240.9MB) | **0.0064 (769.0MB)** | TruffleRuby |
| ternary | 0.0376 (124.0MB) | 0.0278 (1, 282.1MB) | 0.0483 (1, 213.8MB) | **0.0068 (768.8MB)** | TruffleRuby |

> **MRI**: array lookup | **JRuby 10**: if/elsif | **JRuby 1.7**: hash lookup | **TruffleRuby**: array lookup

### Loops

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| loop+break | 0.0371 (143.3MB) | 0.0462 (1, 154.7MB) | 0.0902 (2, 44.5MB) | **0.0003\* (790.3MB)** | TruffleRuby |
| range.each | 0.0259 (143.3MB) | 0.0197 (1, 142.5MB) | 0.0353 (2, 167.0MB) | **0.0003 (749.5MB)** | TruffleRuby |
| step | 0.0260 (143.3MB) | 0.0160\* (1, 270.5MB) | 0.0354 (2, 114.5MB) | **0.0094 (1, 747.4MB)** | TruffleRuby |
| times | 0.0328 (143.3MB) | 0.0173 (2, 134.4MB) | 0.0350\* (2, 100.1MB) | **0.0077 (1, 750.5MB)** | TruffleRuby |
| upto | 0.0268 (143.3MB) | 0.0179 (1, 174.4MB) | 0.0362 (3, 54.1MB) | **0.0004 (751.3MB)** | TruffleRuby |
| while | 0.0238\* (143.3MB) | 0.1015 (1, 201.8MB) | 0.0356 (1, 145.4MB) | **0.0021 (774.0MB)** | TruffleRuby |

> **MRI**: while | **JRuby 10**: step | **JRuby 1.7**: times | **TruffleRuby**: loop+break

### String Search

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| =~ regex | 0.2225 (48, 151.4MB) | 0.2435 (247.3MB) | 0.2443 (1, 104.1MB) | **0.0095 (863.4MB)** | TruffleRuby |
| [] | 0.1608 (3, 143.3MB) | 0.0653 (214.7MB) | 0.0621 (182.2MB) | **0.0094 (799.9MB)** | TruffleRuby |
| include? | 0.1580 (143.3MB) | 0.0635 (174.7MB) | 0.0619 (104.6MB) | **0.0082 (793.1MB)** | TruffleRuby |
| index | 0.1591 (143.3MB) | 0.0660 (190.7MB) | 0.0617 (135.0MB) | **0.0094 (831.5MB)** | TruffleRuby |
| match? | 0.1988 (19, 151.2MB) | 0.2307 (175.3MB) | - | **0.0089 (856.2MB)** | TruffleRuby |
| start_with? | 0.0039\* (151.4MB) | 0.0036\* (263.3MB) | 0.0286\* (8, 101.9MB) | **0.0021\* (794.9MB)** | TruffleRuby |

> **All agree**: start_with?

### Filtering

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each + << | 0.0147 (166.8MB) | 0.0069 (254.1MB) | 0.0198 (150.7MB) | **0.0007 (825.0MB)** | TruffleRuby |
| filter_map | 0.0174 (172.6MB) | 0.0225 (247.0MB) | - | **0.0005 (757.4MB)** | TruffleRuby |
| partition[0] | 0.0179 (172.6MB) | 0.0218 (159.0MB) | 0.0199 (1, 112.0MB) | **0.0009 (768.9MB)** | TruffleRuby |
| reject | 0.0126\* (161.0MB) | 0.0053\* (166.1MB) | 5.7769 (1, 121.2MB) | **0.0004 (824.9MB)** | TruffleRuby |
| select | 0.0127 (155.2MB) | 0.0063 (1, 107.2MB) | 0.0160 (150.6MB) | **0.0004 (792.8MB)** | TruffleRuby |
| select &:even? | 0.0187 (155.2MB) | 0.0179 (1, 82.1MB) | 0.0095\* (1, 98.4MB) | **0.0003\* (818.7MB)** | TruffleRuby |

> **MRI**: reject | **JRuby 10**: reject | **JRuby 1.7**: select &:even? | **TruffleRuby**: select &:even?

### Transform

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| collect | 0.0124 (174.0MB) | 0.0078 (345.9MB) | 0.0238\* (1, 125.6MB) | **0.0004 (757.2MB)** | TruffleRuby |
| each_with_object | 0.0193 (169.6MB) | 0.0142 (309.8MB) | 0.0620 (3, 146.6MB) | **0.0008 (757.0MB)** | TruffleRuby |
| inject | 0.0206 (165.8MB) | 0.0350 (2, 402.5MB) | 0.0406 (3, 155.7MB) | **0.0008 (757.0MB)** | TruffleRuby |
| map | 0.0124\* (174.0MB) | 0.0072\* (215.4MB) | 0.0239 (1, 154.8MB) | **0.0004 (757.5MB)** | TruffleRuby |
| map &proc | 0.0125 (174.0MB) | 0.0117 (1, 153.9MB) | 0.0251 (1, 204.7MB) | **0.0004\* (757.7MB)** | TruffleRuby |

> **MRI**: map | **JRuby 10**: map | **JRuby 1.7**: collect | **TruffleRuby**: map &proc

### Number Conversion

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Integer() | 0.0050 (168.0MB) | 0.0051 (301.8MB) | 0.0073 (1, 110.9MB) | **0.0009 (780.5MB)** | TruffleRuby |
| Integer(s,10) | 0.0073 (168.0MB) | 0.0068 (377.8MB) | 0.0069 (204.5MB) | **0.0002\* (780.7MB)** | TruffleRuby |
| map { to_i } | 0.0048 (168.0MB) | 0.0060 (1, 225.8MB) | 0.0088 (1, 136.1MB) | **0.0004 (764.5MB)** | TruffleRuby |
| map(&:to_i) | 0.0039\* (168.0MB) | 0.0050\* (282.5MB) | 0.0031\* (160.1MB) | **0.0005 (764.5MB)** | TruffleRuby |

> **MRI**: map(&:to_i) | **JRuby 10**: map(&:to_i) | **JRuby 1.7**: map(&:to_i) | **TruffleRuby**: Integer(s,10)

### Nil Handling

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| compact.sum | 0.0015\* (185.5MB) | 0.0036\* (360.2MB) | - | **0.0011\* (753.3MB)** | TruffleRuby |
| nil? ? 0 : itself | 0.0175 (185.5MB) | 0.0100 (440.2MB) | - | **0.0015 (753.4MB)** | TruffleRuby |
| to_i | 0.0212 (185.5MB) | 0.0096 (340.2MB) | 0.0189 (1, 178.2MB) | **0.0017 (749.3MB)** | TruffleRuby |
| v.nil? ternary | 0.0146 (185.5MB) | 0.0098 (260.2MB) | 0.0214 (1, 131.2MB) | **0.0017 (749.2MB)** | TruffleRuby |
| \|\| default | 0.0141 (179.6MB) | 0.0107 (1, 176.2MB) | 0.0145\* (200.6MB) | **0.0013 (771.2MB)** | TruffleRuby |

> **MRI**: compact.sum | **JRuby 10**: compact.sum | **JRuby 1.7**: \|\| default | **TruffleRuby**: compact.sum

### Object Duplication

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Hash[] | 0.0073 (2, 208.3MB) | **0.0064 (456.0MB)** | 0.0076 (1, 122.5MB) | 0.0084 (1, 780.8MB) | JRuby 10 |
| clone | 0.0125 (2, 201.6MB) | 0.0083 (296.0MB) | 0.0115 (1, 188.7MB) | **0.0009 (789.8MB)** | TruffleRuby |
| dup | 0.0122 (3, 209.3MB) | 0.0108 (660.2MB) | 0.0110 (1, 126.9MB) | **0.0014 (753.6MB)** | TruffleRuby |
| merge({}) | 0.0202 (9, 216.5MB) | 0.0081 (708.0MB) | 0.0111 (1, 138.8MB) | **0.0044 (861.8MB)** | TruffleRuby |
| to_h | 0.0040\* (209.0MB) | 0.0016\* (716.0MB) | 0.0040\* (160.8MB) | **0.0005\* (863.4MB)** | TruffleRuby |

> **All agree**: to_h

### Method Invocation

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| __send__ | 0.0266 (191.3MB) | 0.0282 (330.3MB) | 0.0242 (1, 129.6MB) | **0.0065 (851.7MB)** | TruffleRuby |
| direct | 0.0170\* (203.3MB) | 0.0070\* (720.0MB) | 0.0176\* (1, 117.7MB) | **0.0054 (866.4MB)** | TruffleRuby |
| method.call | 0.0346 (193.2MB) | 0.0109 (242.3MB) | 0.0176 (171.2MB) | **0.0039\* (842.2MB)** | TruffleRuby |
| public_send | 0.0378 (195.7MB) | 0.0266 (238.3MB) | 0.0255 (1, 102.4MB) | **0.0057 (870.1MB)** | TruffleRuby |
| send | 0.0268 (199.0MB) | 0.0268 (1, 146.3MB) | 0.0237 (185.4MB) | **0.0057 (899.6MB)** | TruffleRuby |

> **MRI**: direct | **JRuby 10**: direct | **JRuby 1.7**: direct | **TruffleRuby**: method.call

### Block/Yield

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| block.call | 0.0730 (188.8MB) | 0.0286 (350.3MB) | 0.0916 (2, 200.0MB) | **0.0000 (801.3MB)** | TruffleRuby |
| each { } | 0.0108\* (186.5MB) | 0.0052\* (418.3MB) | 0.0143\* (186.9MB) | **0.0001 (801.1MB)** | TruffleRuby |
| lambda.call | 0.0734 (186.8MB) | 0.0583 (350.3MB) | 0.1053 (2, 180.6MB) | **0.0000 (800.9MB)** | TruffleRuby |
| map { } | 0.0123 (186.1MB) | 0.0073 (498.3MB) | 0.0144 (204.6MB) | **0.0003 (801.2MB)** | TruffleRuby |
| nested yield | 0.0952 (188.0MB) | 0.0314 (350.3MB) | 0.1139 (3, 220.6MB) | **0.0105 (1, 800.9MB)** | TruffleRuby |
| no block baseline | 0.0556 (185.8MB) | 0.0111 (196.3MB) | 0.0531 (1, 262.4MB) | **0.0060 (1, 801.6MB)** | TruffleRuby |
| proc.call | 0.0732 (187.3MB) | 0.0440 (350.3MB) | 0.0941 (2, 197.0MB) | **0.0000 (800.9MB)** | TruffleRuby |
| select { } | 0.0142 (185.9MB) | 0.0074 (582.3MB) | 0.0171 (220.4MB) | **0.0020 (801.3MB)** | TruffleRuby |
| unused closure (&block) | 0.0942 (185.8MB) | 0.0490 (1, 719.8MB) | 0.1915 (7, 217.9MB) | **0.0000 (801.3MB)** | TruffleRuby |
| unused closure (yield) | 0.0706 (185.8MB) | 0.0493 (2, 196.3MB) | 0.0930 (5, 226.0MB) | **0.0000 (801.6MB)** | TruffleRuby |
| yield | 0.0702 (189.9MB) | 0.0219 (350.3MB) | 0.0770 (2, 148.1MB) | **0.0000\* (801.3MB)** | TruffleRuby |

> **MRI**: each { } | **JRuby 10**: each { } | **JRuby 1.7**: each { } | **TruffleRuby**: yield

### Eval

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| binding.eval | 0.1517 (18, 107.3MB) | 0.3951 (4, 552.8MB) | 0.0282 (4, 124.7MB) | **0.0007 (859.1MB)** | TruffleRuby |
| class_eval blk | 0.0039 (3, 106.0MB) | 0.0043 (388.7MB) | 0.0071 (244.8MB) | **0.0008 (872.8MB)** | TruffleRuby |
| class_eval str | 0.1733 (18, 106.5MB) | 0.2806 (4, 300.7MB) | **0.0351 (4, 164.6MB)** | 0.3010 (4, 1254.2MB) | JRuby 1.7 |
| direct (baseline) | 0.0014\* (107.0MB) | 0.0006\* (556.8MB) | 0.0010\* (131.4MB) | **0.0004\* (859.4MB)** | TruffleRuby |
| eval simple | 0.1674 (18, 169.3MB) | 0.2765 (4, 668.5MB) | 0.0299 (4, 180.5MB) | **0.0005 (817.8MB)** | TruffleRuby |
| eval vars | 0.1936 (18, 170.8MB) | 0.3278 (4, 696.6MB) | 0.0626 (4, 211.2MB) | **0.0005 (818.1MB)** | TruffleRuby |
| instance_eval blk | 0.0039 (3, 170.3MB) | 0.0038 (544.6MB) | 0.0073 (228.0MB) | **0.0010 (895.3MB)** | TruffleRuby |
| instance_eval str | 0.1686 (18, 170.8MB) | 0.2783 (4, 456.6MB) | **0.0359 (4, 147.9MB)** | 0.3057 (3, 1289.7MB) | JRuby 1.7 |

> **All agree**: direct (baseline)

### Caller

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| caller() | **0.3415 (724, 107.3MB)** | 1.9322 (6, 316.9MB) | 3.5861\* (19, 211.7MB) | 3.9333 (43, 716.1MB) | MRI |
| caller(0) | **0.4016 (833, 107.5MB)** | 1.9325 (6, 440.9MB) | 3.6023 (20, 255.2MB) | 4.2204 (47, 559.0MB) | MRI |
| caller(0, 1) | **0.0618 (108, 107.7MB)** | 0.3949 (2, 188.9MB) | - | 2.0894 (20, 634.3MB) | MRI |
| caller(0, 5) | **0.2212 (470, 107.7MB)** | 2.2572 (7, 673.0MB) | - | 3.0566 (33, 544.0MB) | MRI |
| caller_locations(0, 1) | **0.0177\* (54, 107.8MB)** | 0.3829\* (1, 729.0MB) | - | 1.6238\* (15, 690.6MB) | MRI |
| caller_locations(0, 5) | **0.0376 (330, 107.9MB)** | 2.1525 (6, 477.0MB) | - | 2.4113 (19, 621.1MB) | MRI |

> **MRI**: caller_locations(0, 1) | **JRuby 10**: caller_locations(0, 1) | **JRuby 1.7**: caller() | **TruffleRuby**: caller_locations(0, 1)

### Marshal

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| dump only medium 1k | **0.0209 (165.0MB)** | 0.0388 (537.1MB) | 0.0356 (255.5MB) | 0.0869 (4, 1437.7MB) | MRI |
| dump/load medium 1k | **0.0467 (2, 150.1MB)** | 0.1101 (1, 333.1MB) | 0.0590 (2, 168.5MB) | 0.1319 (5, 1422.5MB) | MRI |
| dump/load small 1k | **0.0018\* (1, 108.4MB)** | 0.0031\* (489.0MB) | 0.0033\* (1, 105.0MB) | 0.0082\* (803.3MB) | MRI |
| load only medium 1k | 0.0239 (1, 168.6MB) | 0.0705 (1, 177.1MB) | **0.0226 (1, 232.0MB)** | 0.0284 (1012.3MB) | JRuby 1.7 |

> **All agree**: dump/load small 1k

### Memoization

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| fetch block 100k | 0.0046 (167.9MB) | 0.0076 (333.1MB) | 0.0104 (238.7MB) | **0.0036 (988.6MB)** | TruffleRuby |
| ivar \|\|= 100k | 0.0043\* (167.5MB) | 0.0012\* (369.1MB) | 0.0051\* (145.1MB) | **0.0011\* (898.4MB)** | TruffleRuby |
| key? + []= 100k | 0.0053 (167.7MB) | 0.0046 (369.1MB) | 0.0116 (1, 128.4MB) | **0.0046 (932.2MB)** | TruffleRuby |
| \|\|= hash key 100k | 0.0056 (168.2MB) | 0.0037 (217.1MB) | 0.0082 (1, 121.8MB) | **0.0019 (990.2MB)** | TruffleRuby |

> **All agree**: ivar \|\|= 100k

### Set vs Array

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Array#include? 10 100k | 0.0040 (167.3MB) | 0.0023 (373.1MB) | 0.0031 (158.4MB) | **0.0018 (886.2MB)** | TruffleRuby |
| Array#include? 1k 10k | 0.0158 (169.8MB) | 0.0115 (757.1MB) | 0.0044 (115.2MB) | **0.0025 (973.1MB)** | TruffleRuby |
| Set reuse 10 100k | 0.0041 (169.9MB) | **0.0012 (757.1MB)** | 0.0045 (111.9MB) | 0.0161 (1004.0MB) | JRuby 10 |
| Set reuse 1k 10k | 0.0005\* (259.2MB) | 0.0011\* (517.4MB) | 0.0007\* (169.1MB) | **0.0002\* (937.8MB)** | TruffleRuby |
| Set.new+incl 10 100k | 0.1500 (36, 170.1MB) | 0.0174 (753.1MB) | 0.1016 (2, 264.6MB) | **0.0161 (2, 986.5MB)** | TruffleRuby |
| Set.new+incl 1k 10k | 0.7754 (16, 259.2MB) | 0.2089 (2, 517.4MB) | 0.4797 (16, 165.7MB) | **0.1783 (6, 1370.2MB)** | TruffleRuby |

> **All agree**: Set reuse 1k 10k

### Mutex

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| lock/unlock 100k | 0.0070 (259.2MB) | 0.0033 (661.4MB) | 0.0071 (189.3MB) | **0.0013 (974.3MB)** | TruffleRuby |
| no sync 100k | 0.0033\* (259.2MB) | 0.0011\* (541.4MB) | 0.0028\* (205.8MB) | **0.0000\* (938.1MB)** | TruffleRuby |
| synchronize 100k | 0.0094 (259.2MB) | 0.0091 (637.4MB) | 0.0088 (1, 152.6MB) | **0.0013 (982.8MB)** | TruffleRuby |
| try_lock 100k | 0.0058 (259.2MB) | 0.0033 (685.4MB) | 0.0076 (226.1MB) | **0.0014 (974.8MB)** | TruffleRuby |

> **All agree**: no sync 100k

### Thread-local

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| current[] read 100k | 0.0041 (259.2MB) | 0.0017 (685.4MB) | 0.0035 (239.4MB) | **0.0000 (975.2MB)** | TruffleRuby |
| current[] write 100k | 0.0048 (259.2MB) | 0.0018 (685.4MB) | 0.0063 (1, 109.1MB) | **0.0000 (1008.7MB)** | TruffleRuby |
| ivar read 100k | 0.0035 (259.2MB) | 0.0012 (685.4MB) | 0.0032 (122.5MB) | **0.0000 (1010.4MB)** | TruffleRuby |
| local var 100k | 0.0024\* (259.2MB) | 0.0008\* (689.4MB) | 0.0020\* (135.9MB) | **0.0000\* (1010.7MB)** | TruffleRuby |

> **All agree**: local var 100k

### Data Structures

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| Class create 10k | 0.0020 (5, 259.4MB) | 0.0063 (749.4MB) | 0.0025 (236.2MB) | **0.0006 (1017.7MB)** | TruffleRuby |
| Class read 100k | 0.0026 (259.3MB) | 0.0009 (753.4MB) | 0.0025 (112.5MB) | **0.0000 (868.2MB)** | TruffleRuby |
| Class write 100k | 0.0102 (13, 259.4MB) | 0.0035 (397.8MB) | 0.0096 (1, 172.6MB) | **0.0025 (835.5MB)** | TruffleRuby |
| Hash create 10k | 0.0016\* (3, 259.5MB) | 0.0019 (713.4MB) | 0.0013\* (175.9MB) | **0.0004 (1015.1MB)** | TruffleRuby |
| Hash read 100k | 0.0028 (259.3MB) | 0.0016 (749.4MB) | 0.0030 (252.9MB) | **0.0000\* (941.7MB)** | TruffleRuby |
| Hash write 100k | 0.0112 (13, 259.4MB) | 0.0076 (1, 185.8MB) | 0.0164 (1, 189.3MB) | **0.0020 (832.9MB)** | TruffleRuby |
| Struct create 10k | 0.0017 (2, 259.3MB) | 0.0041 (729.4MB) | 0.0023 (206.0MB) | **0.0004 (1017.7MB)** | TruffleRuby |
| Struct read 100k | 0.0026 (259.3MB) | **0.0009\* (749.4MB)** | 0.0024 (266.3MB) | 0.0014 (868.1MB) | JRuby 10 |
| Struct write 100k | 0.0103 (13, 259.4MB) | 0.0043 (293.8MB) | 0.0145 (262.8MB) | **0.0025 (833.4MB)** | TruffleRuby |

> **MRI**: Hash create 10k | **JRuby 10**: Struct read 100k | **JRuby 1.7**: Hash create 10k | **TruffleRuby**: Hash read 100k

### YAML

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| dump only medium 1k | 0.5273 (230, 274.9MB) | **0.3368 (3, 194.8MB)** | 0.7669 (21, 121.5MB) | 1.1592 (4, 1822.2MB) | JRuby 10 |
| dump/load medium 500 | 0.8656 (249, 274.9MB) | **0.5703 (7, 582.7MB)** | 1.0031 (34, 208.1MB) | 1.3644 (7, 1838.9MB) | JRuby 10 |
| dump/load small 1k | **0.0673\* (13, 274.5MB)** | 0.1074\* (1, 374.2MB) | 0.0710\* (2, 146.5MB) | 0.1384\* (3, 1118.0MB) | MRI |
| load only medium 1k | 1.1531 (250, 275.0MB) | **0.7951 (12, 218.9MB)** | 1.2197 (48, 236.0MB) | 1.4586 (7, 1565.1MB) | JRuby 10 |

> **All agree**: dump/load small 1k

### Lazy Evaluation

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| find (eager) | 0.1503 (275.0MB) | 0.0558 (1, 239.3MB) | - | **0.0024 (1118.1MB)** | TruffleRuby |
| lazy.find | 0.1509 (275.0MB) | 0.2014 (1, 291.4MB) | - | **0.0018\* (1130.9MB)** | TruffleRuby |
| lazy.map.first 10 | **0.0026\* (2, 402.1MB)** | 0.0110\* (90.3MB) | - | 0.0045 (1237.0MB) | MRI |
| lazy.select.first | 0.3210 (356, 320.8MB) | 0.9608 (29, 130.2MB) | - | **0.0374 (1158.4MB)** | TruffleRuby |
| map.first 10 (eager) | 0.2477 (5, 402.0MB) | 0.1653 (8, 270.6MB) | - | **0.0086 (1201.9MB)** | TruffleRuby |
| select.first (eager) | 0.2389 (6, 320.8MB) | 0.1368 (1, 559.5MB) | - | **0.0062 (1118.3MB)** | TruffleRuby |

> **MRI**: lazy.map.first 10 | **JRuby 10**: lazy.map.first 10 | **TruffleRuby**: lazy.find

### Grouping

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| dual select 100 | 0.0525 (1, 432.9MB) | 0.0476 (1, 79.2MB) | 0.0649 (2, 159.8MB) | **0.0019 (1263.2MB)** | TruffleRuby |
| each_with_object 100 | 0.0932 (1, 432.8MB) | 0.1052 (1, 114.9MB) | 0.1786 (2, 268.1MB) | **0.0362 (1222.7MB)** | TruffleRuby |
| group_by block 100 | 0.0680 (1, 432.6MB) | 0.0936 (1, 174.4MB) | 0.1015 (2, 129.3MB) | **0.0520 (1292.4MB)** | TruffleRuby |
| inject grouping 100 | 0.0980 (1, 432.8MB) | 0.1335 (1, 230.6MB) | 0.1487 (3, 235.1MB) | **0.0366 (1158.2MB)** | TruffleRuby |
| partition 2 groups 100 | 0.0368\* (1, 432.8MB) | 0.0386\* (323.1MB) | 0.0411\* (2, 130.0MB) | **0.0015\* (1204.1MB)** | TruffleRuby |

> **All agree**: partition 2 groups 100

### Metaprogramming

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| def method call 100k | 0.0030\* (432.9MB) | 0.0014 (83.2MB) | 0.0029 (173.2MB) | **0.0000\* (1182.9MB)** | TruffleRuby |
| define_method call 100k | 0.0034 (432.9MB) | 0.0038 (163.2MB) | 0.0086 (1, 122.9MB) | **0.0000 (1174.8MB)** | TruffleRuby |
| ivar_get 100k | 0.0035 (432.9MB) | **0.0012\* (203.2MB)** | 0.0033 (179.0MB) | 0.0013 (1177.4MB) | JRuby 10 |
| ivar_set 100k | 0.0037 (432.9MB) | 0.0019 (215.2MB) | 0.0044 (192.2MB) | **0.0000 (1177.6MB)** | TruffleRuby |
| method().call 100k | 0.0060 (432.9MB) | 0.0013 (203.2MB) | 0.0029\* (165.8MB) | **0.0000 (1177.2MB)** | TruffleRuby |
| respond_to?+send 100k | 0.0069 (432.9MB) | 0.0084 (199.2MB) | 0.0058 (152.6MB) | **0.0000 (1177.0MB)** | TruffleRuby |
| send 100k | 0.0050 (432.9MB) | 0.0043 (179.2MB) | 0.0038 (136.1MB) | **0.0000 (1176.9MB)** | TruffleRuby |

> **MRI**: def method call 100k | **JRuby 10**: ivar_get 100k | **JRuby 1.7**: method().call 100k | **TruffleRuby**: def method call 100k

### Exceptions

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| begin/rescue none 100k | 0.0032 (432.9MB) | 0.0012\* (219.2MB) | 0.0047 (228.5MB) | **0.0000\* (1167.7MB)** | TruffleRuby |
| nested throw/catch 10k | 0.0019 (439.2MB) | 0.0061 (110.9MB) | 0.0175 (212.8MB) | **0.0003 (1122.4MB)** | TruffleRuby |
| no exception 100k | 0.0028 (432.9MB) | 0.0065 (219.2MB) | 0.0020\* (205.4MB) | **0.0000 (1177.6MB)** | TruffleRuby |
| raise/rescue 10k | 0.0038 (1, 439.2MB) | 0.0030 (227.2MB) | 0.4032 (1, 198.9MB) | **0.0001 (1169.2MB)** | TruffleRuby |
| raise/rescue msg 10k | **0.0042 (1, 439.2MB)** | 0.2025 (2, 62.9MB) | 0.4064 (1, 173.0MB) | 0.2938 (1, 1133.0MB) | MRI |
| throw/catch 10k | 0.0011\* (439.2MB) | 0.0028 (78.9MB) | 0.0100 (189.6MB) | **0.0003 (1111.4MB)** | TruffleRuby |

> **MRI**: throw/catch 10k | **JRuby 10**: begin/rescue none 100k | **JRuby 1.7**: no exception 100k | **TruffleRuby**: begin/rescue none 100k

### String Freeze

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| -"" dedup 100k | 0.0024 (439.2MB) | 0.0005\* (114.9MB) | - | **0.0000 (1121.0MB)** | TruffleRuby |
| .freeze 100k | 0.0024 (439.2MB) | 0.0005 (114.9MB) | 0.0030 (1, 119.9MB) | **0.0000\* (1120.8MB)** | TruffleRuby |
| dup 100k | 0.0046 (7, 439.2MB) | **0.0012 (134.9MB)** | 0.0026 (156.4MB) | 0.0013 (1121.4MB) | JRuby 10 |
| interpolate 100k | 0.0065 (7, 439.2MB) | 0.0024 (202.9MB) | 0.0143 (1, 126.5MB) | **0.0011 (1088.2MB)** | TruffleRuby |
| interpolate.freeze 100k | 0.0082 (7, 439.2MB) | 0.0026 (274.9MB) | 0.0145 (265.9MB) | **0.0005 (1088.2MB)** | TruffleRuby |
| literal 100k | 0.0023\* (439.2MB) | 0.0006 (114.9MB) | 0.0020\* (249.3MB) | **0.0000 (1120.6MB)** | TruffleRuby |

> **MRI**: literal 100k | **JRuby 10**: -"" dedup 100k | **JRuby 1.7**: literal 100k | **TruffleRuby**: .freeze 100k

### Split Patterns

| Technique | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner |
|:----------|----------:|----------:|----------:|----------:|:------:|
| each_line 10k | 0.0075 (8, 439.7MB) | 0.0061 (275.0MB) | **0.0044 (216.2MB)** | 0.0147 (1, 1256.7MB) | JRuby 1.7 |
| lines method 10k | 0.0052 (7, 439.7MB) | 0.0036 (1, 43.1MB) | **0.0020 (229.5MB)** | 0.0043 (1216.8MB) | JRuby 1.7 |
| scan pattern 10k | 0.0232 (63, 439.8MB) | 0.0148 (283.1MB) | 0.0214 (1, 176.5MB) | **0.0091 (1, 1247.3MB)** | TruffleRuby |
| split limit -1 10k | 0.0055 (7, 439.7MB) | 0.0024 (115.0MB) | 0.0026 (236.0MB) | **0.0023\* (1156.7MB)** | TruffleRuby |
| split limit 3 10k | 0.0019\* (2, 439.7MB) | 0.0050 (59.0MB) | **0.0013\* (179.6MB)** | 0.0134 (1166.9MB) | JRuby 1.7 |
| split newline 10k | 0.0056 (7, 439.7MB) | **0.0022\* (167.0MB)** | 0.0023 (1, 129.9MB) | 0.0023 (1174.8MB) | JRuby 10 |
| split no limit 10k | 0.0055 (7, 439.7MB) | 0.0053 (1, 39.0MB) | **0.0032 (156.4MB)** | 0.0043 (1144.4MB) | JRuby 1.7 |

> **MRI**: split limit 3 10k | **JRuby 10**: split newline 10k | **JRuby 1.7**: split limit 3 10k | **TruffleRuby**: split limit -1 10k

## Operation Benchmarks

Format: **time** (gc collections, heap MB)

| Benchmark | MRI | JRuby 10 | JRuby 1.7 | TruffleRuby | Winner | Factor |
|:----------|----------:|----------:|----------:|----------:|:------:|-------:|
| Array creation (Array.new) | 0.2425 (5, 569.9MB) | 0.1983 (5, 91.6MB) | 0.3029 (15, 220.3MB) | **0.0016 (1211.2MB)** | TruffleRuby | 188.8x |
| Array creation (literal) | 0.0038 (7, 498.7MB) | 0.0007 (251.4MB) | 0.0057 (226.7MB) | **0.0000 (1234.8MB)** | TruffleRuby | 11053.7x |
| Array#compact | 0.0328 (1, 608.5MB) | 0.0280 (1, 199.4MB) | 0.0409 (1, 313.0MB) | **0.0050 (1142.9MB)** | TruffleRuby | 8.2x |
| Array#each | 0.0264 (592.9MB) | 0.0432 (1, 208.3MB) | 0.0446 (2, 256.0MB) | **0.0018 (1193.3MB)** | TruffleRuby | 25.0x |
| Array#flatten | 0.0325 (3, 607.8MB) | 0.0187 (159.8MB) | 0.0273 (1, 179.9MB) | **0.0006 (1148.2MB)** | TruffleRuby | 50.1x |
| Array#include? | 0.2040 (607.7MB) | 0.1769 (196.0MB) | 0.0815 (184.1MB) | **0.0325 (1109.1MB)** | TruffleRuby | 6.3x |
| Array#index | 0.2249 (607.2MB) | 0.1802 (204.0MB) | 0.1094 (196.6MB) | **0.0257 (1136.1MB)** | TruffleRuby | 8.8x |
| Array#map | 0.0125 (592.9MB) | 0.0106 (408.3MB) | 0.0214 (1, 245.0MB) | **0.0004 (1161.3MB)** | TruffleRuby | 48.7x |
| Array#push (append) | 0.0168 (592.9MB) | **0.0077 (327.6MB)** | 0.0389 (1, 295.8MB) | 0.0079 (1211.2MB) | JRuby 10 | 5.0x |
| Array#reduce | 0.0351 (593.0MB) | 0.0644 (3, 61.4MB) | 0.0686 (3, 288.1MB) | **0.0004 (1104.5MB)** | TruffleRuby | 178.9x |
| Array#select | 0.0127 (593.0MB) | 0.0133 (2, 84.2MB) | 0.0159 (267.3MB) | **0.0004 (1104.9MB)** | TruffleRuby | 39.0x |
| Array#sort | 0.0201 (593.0MB) | 0.0329 (141.4MB) | 0.0236 (195.0MB) | **0.0120 (1122.4MB)** | TruffleRuby | 2.7x |
| Array#sort_by | 0.0513 (15, 600.6MB) | 0.0842 (1, 215.3MB) | 0.0796 (2, 267.6MB) | **0.0314 (1168.6MB)** | TruffleRuby | 2.7x |
| Array#uniq | 0.0382 (1, 608.2MB) | 0.0312 (188.0MB) | 0.0401 (1, 171.6MB) | **0.0156 (1169.2MB)** | TruffleRuby | 2.6x |
| Array#unshift (prepend) | **0.0004 (592.9MB)** | 0.0040 (331.6MB) | 0.0043 (303.5MB) | 0.0213 (1210.8MB) | MRI | 57.6x |
| CSV.generate | 0.0785 (109, 847.8MB) | **0.0449 (721.8MB)** | 0.0827 (4, 251.3MB) | 0.0516 (5, 1447.0MB) | JRuby 10 | 1.8x |
| CSV.parse | 0.0859 (93, 847.7MB) | **0.0394 (1175.9MB)** | 0.0923 (3, 346.9MB) | 0.3861 (3, 1363.7MB) | JRuby 10 | 9.8x |
| Date.parse | 0.0169 (5, 848.2MB) | **0.0167 (1161.8MB)** | 0.1036 (2, 327.0MB) | 0.3955 (3, 1387.8MB) | JRuby 10 | 23.7x |
| Deep hash tree creation | 0.0092 (18, 807.3MB) | 0.0103 (1355.2MB) | 0.0102 (377.1MB) | **0.0023 (1249.6MB)** | TruffleRuby | 4.4x |
| Float() parsing | **0.0062 (847.7MB)** | 0.0159 (1005.8MB) | 0.0174 (1, 287.8MB) | 0.0139 (1415.4MB) | MRI | 2.8x |
| Frozen string literals | 0.0030 (498.7MB) | 0.0012 (223.4MB) | 0.0045 (1, 154.2MB) | **0.0002 (1206.1MB)** | TruffleRuby | 23.8x |
| Hash creation (from array) | 0.1980 (211, 602.6MB) | 0.1352 (4, 143.7MB) | 0.2108 (10, 191.3MB) | **0.0607 (4, 1541.7MB)** | TruffleRuby | 3.5x |
| Hash creation (literal) | 0.0155 (58, 602.6MB) | 0.0108 (1, 199.6MB) | 0.0162 (1, 215.4MB) | **0.0020 (1135.6MB)** | TruffleRuby | 8.1x |
| Hash map keys | 0.1495 (64, 806.9MB) | 0.1980 (1, 1356.6MB) | 0.1896 (5, 348.0MB) | **0.0604 (4, 1248.2MB)** | TruffleRuby | 3.3x |
| Hash map values | 0.0679 (3, 807.0MB) | 0.1219 (3, 860.5MB) | 0.1761 (4, 351.6MB) | **0.0247 (1, 1219.3MB)** | TruffleRuby | 7.1x |
| Hash#[] (read) | 0.1230 (602.6MB) | 0.1186 (187.3MB) | 0.1389 (2, 206.4MB) | **0.0423 (1187.5MB)** | TruffleRuby | 3.3x |
| Hash#[]= (write) | 0.1177 (4, 717.8MB) | 0.4148 (6, 523.6MB) | 0.3309 (7, 184.9MB) | **0.0384 (1355.2MB)** | TruffleRuby | 10.8x |
| Hash#[]= 10k int keys x50 | 0.0280 (1, 778.7MB) | 0.0525 (1, 851.1MB) | 0.0273 (2, 189.6MB) | **0.0100 (1752.7MB)** | TruffleRuby | 5.2x |
| Hash#[]= 500k frozen string keys | 0.0611 (1, 738.5MB) | 0.1516 (847.0MB) | 0.2255 (4, 228.8MB) | **0.0321 (3, 1336.2MB)** | TruffleRuby | 7.0x |
| Hash#[]= 500k int keys | 0.0363 (1, 699.3MB) | 0.1517 (1, 459.6MB) | 0.0304 (3, 190.8MB) | **0.0176 (1141.6MB)** | TruffleRuby | 8.6x |
| Hash#[]= 500k string keys | 0.1335 (8, 734.9MB) | 0.3435 (793.8MB) | 0.3618 (10, 215.1MB) | **0.0809 (5, 1387.5MB)** | TruffleRuby | 4.5x |
| Hash#[]= 500k symbol keys | **0.2090 (5, 822.1MB)** | 0.4268 (4, 885.9MB) | 0.4360 (12, 231.5MB) | 0.3236 (5, 1737.8MB) | MRI | 2.1x |
| Hash#each | 0.0723 (772.3MB) | 0.1153 (1, 1048.0MB) | 0.2219 (10, 304.3MB) | **0.0128 (1434.3MB)** | TruffleRuby | 17.4x |
| Hash#keys 500k | **0.0279 (37, 797.5MB)** | 1.1924 (1, 1314.9MB) | 0.3903 (5, 242.6MB) | 0.2174 (10, 1432.6MB) | MRI | 42.8x |
| Hash#keys and Hash#values | **0.0137 (13, 780.0MB)** | 0.2792 (1, 1076.0MB) | 0.4353 (2, 320.2MB) | 0.1165 (4, 1290.0MB) | MRI | 31.7x |
| Hash#merge | 0.2003 (41, 798.0MB) | 0.4140 (2, 1115.0MB) | 0.8532 (15, 282.5MB) | **0.1961 (11, 1826.3MB)** | TruffleRuby | 4.4x |
| Hash#select | 0.0979 (9, 814.5MB) | 0.2165 (1, 601.4MB) | 0.2745 (7, 350.2MB) | **0.0537 (3, 1231.4MB)** | TruffleRuby | 5.1x |
| Hash#to_a | 0.1321 (99, 815.0MB) | **0.0440 (1259.2MB)** | 0.0744 (7, 380.9MB) | 0.0467 (7, 1435.2MB) | JRuby 10 | 3.0x |
| Integer() parsing | 0.0047 (847.7MB) | 0.0062 (797.8MB) | 0.0068 (345.8MB) | **0.0035 (1385.3MB)** | TruffleRuby | 2.0x |
| JSON.generate | **0.0322 (1, 847.1MB)** | 0.0741 (803.9MB) | 0.0955 (4, 297.1MB) | 0.1613 (18, 1496.4MB) | MRI | 5.0x |
| JSON.parse | **0.0499 (67, 807.5MB)** | 0.2280 (1, 351.9MB) | 0.1911 (5, 291.5MB) | 0.3019 (16, 2315.8MB) | MRI | 6.1x |
| Java HashMap 500k int keys | - | **0.0229 (1022.9MB)** | 0.0677 (4, 358.5MB) | - | JRuby 10 | 3.0x |
| Line-by-line parsing | 0.0331 (35, 850.7MB) | **0.0126 (618.4MB)** | 0.0192 (1, 329.5MB) | 0.0213 (1, 1414.0MB) | JRuby 10 | 2.6x |
| Nested hash access | 0.2218 (812.3MB) | 0.1987 (777.4MB) | 0.2405 (2, 318.1MB) | **0.0754 (1221.8MB)** | TruffleRuby | 3.2x |
| Regex extraction | 0.0061 (18, 848.3MB) | 0.0079 (1213.8MB) | **0.0059 (382.7MB)** | 0.0108 (1427.9MB) | JRuby 1.7 | 1.8x |
| String encoding conversion | 0.0520 (1, 498.7MB) | 0.0961 (215.4MB) | **0.0257 (1, 272.0MB)** | 0.2361 (2, 1205.7MB) | JRuby 1.7 | 9.2x |
| String#gsub (regex) | 0.4564 (1592, 439.8MB) | 0.2183 (1, 379.3MB) | 0.1967 (7, 282.0MB) | **0.1194 (8, 1837.6MB)** | TruffleRuby | 3.8x |
| String#match | 0.0272 (57, 439.8MB) | 0.0328 (279.3MB) | 0.0385 (1, 280.8MB) | **0.0046 (1183.6MB)** | TruffleRuby | 8.3x |
| String#scan (regex) | 0.3136 (869, 439.8MB) | 0.1291 (5, 375.4MB) | 0.1260 (3, 280.9MB) | **0.0459 (5, 1730.3MB)** | TruffleRuby | 6.8x |
| String#split | 0.0966 (187, 439.8MB) | 0.0622 (2, 227.6MB) | 0.0439 (5, 170.5MB) | **0.0326 (1, 1746.3MB)** | TruffleRuby | 3.0x |
| Tokenization (scan) | 0.0208 (56, 848.3MB) | 0.0146 (1, 322.4MB) | 0.0129 (301.1MB) | **0.0073 (1435.0MB)** | TruffleRuby | 2.9x |

## Summary

### Technique Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 16 |
| JRuby 10 | 10 |
| JRuby 1.7 | 7 |
| TruffleRuby | 152 |

### Operation Wins

| Ruby | Wins |
|:-----|-----:|
| MRI | 7 |
| JRuby 10 | 7 |
| JRuby 1.7 | 2 |
| TruffleRuby | 35 |

### Overall

| Ruby | Total Wins |
|:-----|----------:|
| TruffleRuby | 187 |
| MRI | 23 |
| JRuby 10 | 17 |
| JRuby 1.7 | 9 |

## Recommendations

Best technique to use for each category:

| Category | Recommendation |
|:---------|:---------------|
| String Building | MRI: `Array#join`, JRuby 10: `concat`, JRuby 1.7: `inject <<`, TruffleRuby: `interpolation` |
| Array Iteration | MRI: `reduce(:+)`, JRuby 10: `sum`, JRuby 1.7: `reduce(:+)`, TruffleRuby: `for in` |
| Array Building | `Range#to_a` |
| Array Sorting | MRI: `sort!`, JRuby 10: `sort!`, JRuby 1.7: `sort!`, TruffleRuby: `sort` |
| Hash Building | MRI: `zip.to_h`, JRuby 10: `zip.to_h`, JRuby 1.7: `Hash[]`, TruffleRuby: `each_with_object` |
| Hash Access | MRI: `[] existing`, JRuby 10: `fetch existing`, JRuby 1.7: `fetch default`, TruffleRuby: `\|\| default` |
| Hash Key Iteration | MRI: `keys.map`, JRuby 10: `keys.map`, JRuby 1.7: `keys.map`, TruffleRuby: `map { \|k,_\| }` |
| Conditionals | MRI: `array lookup`, JRuby 10: `if/elsif`, JRuby 1.7: `hash lookup`, TruffleRuby: `array lookup` |
| Loops | MRI: `while`, JRuby 10: `step`, JRuby 1.7: `times`, TruffleRuby: `loop+break` |
| String Search | `start_with?` |
| Filtering | MRI: `reject`, JRuby 10: `reject`, JRuby 1.7: `select &:even?`, TruffleRuby: `select &:even?` |
| Transform | MRI: `map`, JRuby 10: `map`, JRuby 1.7: `collect`, TruffleRuby: `map &proc` |
| Number Conversion | MRI: `map(&:to_i)`, JRuby 10: `map(&:to_i)`, JRuby 1.7: `map(&:to_i)`, TruffleRuby: `Integer(s,10)` |
| Nil Handling | MRI: `compact.sum`, JRuby 10: `compact.sum`, JRuby 1.7: `\|\| default`, TruffleRuby: `compact.sum` |
| Object Duplication | `to_h` |
| Method Invocation | MRI: `direct`, JRuby 10: `direct`, JRuby 1.7: `direct`, TruffleRuby: `method.call` |
| Block/Yield | MRI: `each { }`, JRuby 10: `each { }`, JRuby 1.7: `each { }`, TruffleRuby: `yield` |
| Eval | `direct (baseline)` |
| Caller | MRI: `caller_locations(0, 1)`, JRuby 10: `caller_locations(0, 1)`, JRuby 1.7: `caller()`, TruffleRuby: `caller_locations(0, 1)` |
| Marshal | `dump/load small 1k` |
| Memoization | `ivar \|\|= 100k` |
| Set vs Array | `Set reuse 1k 10k` |
| Mutex | `no sync 100k` |
| Thread-local | `local var 100k` |
| Data Structures | MRI: `Hash create 10k`, JRuby 10: `Struct read 100k`, JRuby 1.7: `Hash create 10k`, TruffleRuby: `Hash read 100k` |
| YAML | `dump/load small 1k` |
| Lazy Evaluation | MRI: `lazy.map.first 10`, JRuby 10: `lazy.map.first 10`, TruffleRuby: `lazy.find` |
| Grouping | `partition 2 groups 100` |
| Metaprogramming | MRI: `def method call 100k`, JRuby 10: `ivar_get 100k`, JRuby 1.7: `method().call 100k`, TruffleRuby: `def method call 100k` |
| Exceptions | MRI: `throw/catch 10k`, JRuby 10: `begin/rescue none 100k`, JRuby 1.7: `no exception 100k`, TruffleRuby: `begin/rescue none 100k` |
| String Freeze | MRI: `literal 100k`, JRuby 10: `-"" dedup 100k`, JRuby 1.7: `literal 100k`, TruffleRuby: `.freeze 100k` |
| Split Patterns | MRI: `split limit 3 10k`, JRuby 10: `split newline 10k`, JRuby 1.7: `split limit 3 10k`, TruffleRuby: `split limit -1 10k` |
